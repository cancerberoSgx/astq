/*
**  ASTq -- Abstract Syntax Tree (AST) Query Engine
**  Copyright (c) 2014-2019 Dr. Ralf S. Engelschall <rse@engelschall.com>
**
**  Permission is hereby granted, free of charge, to any person obtaining
**  a copy of this software and associated documentation files (the
**  "Software"), to deal in the Software without restriction, including
**  without limitation the rights to use, copy, modify, merge, publish,
**  distribute, sublicense, and/or sell copies of the Software, and to
**  permit persons to whom the Software is furnished to do so, subject to
**  the following conditions:
**
**  The above copyright notice and this permission notice shall be included
**  in all copies or substantial portions of the Software.
**
**  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
**  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
**  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
**  IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
**  CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
**  TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
**  SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
*/

(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.ASTQ = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(_dereq_,module,exports){
(function (global){
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).ASTY=e()}}(function(){return function(){return function e(n,t,r){function o(a,u){if(!t[a]){if(!n[a]){var f="function"==typeof _dereq_&&_dereq_;if(!u&&f)return f(a,!0);if(i)return i(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=t[a]={exports:{}};n[a][0].call(c.exports,function(e){return o(n[a][1][e]||e)},c,c.exports,e,n,t,r)}return t[a].exports}for(var i="function"==typeof _dereq_&&_dereq_,a=0;a<r.length;a++)o(r[a]);return o}}()({1:[function(e,n,t){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,n,t){n&&o(e.prototype,n),t&&o(e,t)}(e,[{key:"init",value:function(e,n,t,o){if(arguments.length<2)throw new Error("init: invalid number of arguments");if(this.ctx=e,this.ASTy=!0,this.T=n,this.L={L:0,C:0,O:0},this.A={},this.C=[],this.P=null,"object"===r(t))for(var i in t)t.hasOwnProperty(i)&&this.set(i,t[i]);return"object"===r(o)&&o instanceof Array&&this.add(o),this}},{key:"create",value:function(e,n,t){return this.ctx.create(e,n,t)}},{key:"type",value:function(e){if(0===arguments.length)return this.T;if(1===arguments.length)return this.T=e,this;throw new Error("type: invalid number of arguments")}},{key:"pos",value:function(e,n,t){if(0===arguments.length)return{line:this.L.L,column:this.L.C,offset:this.L.O};if(arguments.length<=3)return this.L.L=e||0,this.L.C=n||0,this.L.O=t||0,this;throw new Error("pos: invalid number of arguments")}},{key:"set",value:function(){for(var e=this,n=arguments.length,t=new Array(n),o=0;o<n;o++)t[o]=arguments[o];if(1===t.length&&"object"===r(t[0]))Object.keys(t[0]).forEach(function(n){void 0!==t[0][n]?e.A[n]=t[0][n]:delete e.A[n]});else{if(2!==t.length)throw new Error("set: invalid number of arguments");void 0!==t[1]?this.A[t[0]]=t[1]:delete this.A[t[0]]}return this}},{key:"unset",value:function(){for(var e=this,n=arguments.length,t=new Array(n),o=0;o<n;o++)t[o]=arguments[o];if(1===t.length&&"object"===r(t[0])&&t[0]instanceof Array)t[0].forEach(function(n){delete e.A[n]});else{if(1!==t.length)throw new Error("unset: invalid number of arguments");delete this.A[t[0]]}return this}},{key:"get",value:function(){for(var e=this,n=arguments.length,t=new Array(n),o=0;o<n;o++)t[o]=arguments[o];if(1!==t.length)throw new Error("get: invalid number of arguments");if("object"===r(t[0])&&t[0]instanceof Array)return t[0].map(function(n){if("string"!=typeof n)throw new Error("get: invalid key argument");return e.A[n]});var i=t[0];if("string"!=typeof i)throw new Error("get: invalid key argument");return this.A[i]}},{key:"attrs",value:function(){return Object.keys(this.A)}},{key:"nth",value:function(){if(null===this.P)return 1;var e=this.P.C.indexOf(this);if(e<0)throw new Error("nth: internal error -- node not in childs of its parent");return e}},{key:"ins",value:function(e){for(var n=this,t=arguments.length,o=new Array(t>1?t-1:0),i=1;i<t;i++)o[i-1]=arguments[i];if(0===o.length)throw new Error("ins: invalid number of arguments");if(e<0&&(e=this.C.length+1-e),!(e>=0&&e<=this.C.length))throw new Error("ins: invalid position");var a=function(t){if(!n.ctx.isA(t))throw new Error("ins: invalid AST node argument");n.C.splice(e++,0,t),t.P=n};return o.forEach(function(e){"object"===r(e)&&e instanceof Array?e.forEach(function(e){a(e)}):null!==e&&a(e)}),this}},{key:"add",value:function(){for(var e=this,n=arguments.length,t=new Array(n),o=0;o<n;o++)t[o]=arguments[o];if(0===t.length)throw new Error("add: invalid number of arguments");var i=function(n){if(!e.ctx.isA(n))throw new Error("add: invalid AST node argument");e.C.push(n),n.P=e};return t.forEach(function(e){"object"===r(e)&&e instanceof Array?e.forEach(function(e){i(e)}):null!==e&&i(e)}),this}},{key:"del",value:function(){for(var e=this,n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];if(0===t.length)throw new Error("del: invalid number of arguments");return t.forEach(function(n){if(!e.ctx.isA(n))throw new Error("del: invalid AST node argument");for(var t=!1,r=0;r<e.C.length;r++)if(e.C[r]===n){e.C.splice(r,1),n.P=null,t=!0;break}if(!t)throw new Error("del: AST node not found in childs")}),this}},{key:"childs",value:function(){if(arguments.length>2)throw new Error("childs: invalid number of arguments");if(2===arguments.length&&"number"==typeof(arguments.length<=0?void 0:arguments[0])&&"number"==typeof(arguments.length<=1?void 0:arguments[1]))return this.C.slice(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1]);if(1===arguments.length&&"number"==typeof(arguments.length<=0?void 0:arguments[0]))return this.C.slice(arguments.length<=0?void 0:arguments[0]);if(0===arguments.length)return this.C;throw new Error("childs: invalid type of arguments")}},{key:"child",value:function(e){if("number"!=typeof e)throw new Error("child: invalid argument");return e<this.C.length?this.C[e]:null}},{key:"parent",value:function(){return this.P}},{key:"serialize",value:function(){return this.ctx.__serialize(this)}}]),e}();t.default=i},{}],2:[function(e,n,t){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={mid:{unicode:String.fromCharCode(9500),ascii:"+"},last:{unicode:String.fromCharCode(9492),ascii:"+"},down:{unicode:String.fromCharCode(9474),ascii:"|"},left:{unicode:String.fromCharCode(9472),ascii:"-"}},a=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,n,t){n&&o(e.prototype,n),t&&o(e,t)}(e,[{key:"dump",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,n){return n},t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o="",a=this;return this.walk(function(u,f){if(!(f>e)){if(f>0){var l=function(e){var n=0,t=0;return null!==e.P&&(n=e.P.C.indexOf(e),t=e.P.C.length-1),{nth:n,max:t}},c=l(u),s=c.nth,h=c.max,d=" ";d=t?"".concat(i.left.unicode).concat(i.left.unicode).concat(d):"".concat(i.left.ascii).concat(i.left.ascii).concat(d),d=s<h?"".concat(t?i.mid.unicode:i.mid.ascii).concat(d):"".concat(t?i.last.unicode:i.last.ascii).concat(d);for(var y=u.P;null!==y&&y!==a;y=y.P)if(null!==y.P){var v=l(y);d=v.nth<v.max?"".concat(t?i.down.unicode:i.down.ascii,"   ").concat(d):"    ".concat(d)}o+=n("tree",d)}o+=n("type",u.T)+" ";var p=Object.keys(u.A);if(p.length>0){o+=n("parenthesis","(");var b=!0;p.forEach(function(e){b?b=!1:o+=n("comma",",")+" ",o+=n("key",e)+n("colon",":")+" ";var t=u.A[e];switch(r(t)){case"boolean":case"number":o+=n("value",t.toString());break;case"string":var i=function(e){return e.charCodeAt(0).toString(16).toUpperCase()};o+=n("value",'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(e){return"\\x0"+i(e)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(e){return"\\x"+i(e)}).replace(/[\u0100-\u0FFF]/g,function(e){return"\\u0"+i(e)}).replace(/[\u1000-\uFFFF]/g,function(e){return"\\u"+i(e)})+'"');break;case"object":t instanceof RegExp?o+=n("value","/"+t.source+"/"):o+=n("value",JSON.stringify(t));break;default:o+=n("value",JSON.stringify(t))}}),o+=n("parenthesis",")")+" "}o+=n("position",n("bracket","[")+n("line",u.L.L)+n("slash",",")+n("column",u.L.C)+n("bracket","]")),o+="\n"}},"downward"),o}}]),e}();t.default=a},{}],3:[function(e,n,t){"use strict";function r(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,n,t){n&&r(e.prototype,n),t&&r(e,t)}(e,[{key:"merge",value:function(e){var n=this,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null===e)return this;if(!this.ctx.isA(e))throw new Error("merge: invalid AST node argument");if(t){var o=e.pos();this.pos(o.line,o.column,o.offset)}e.attrs().forEach(function(t){var o=void 0!==r[t]?r[t]:t;null!==o&&n.set(o,e.get(t))}),e.childs().forEach(function(t){e.del(t),n.add(t)});var i=e.parent();return null!==i&&i.del(e),this}}]),e}();t.default=o},{}],4:[function(e,n,t){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,n,t){n&&o(e.prototype,n),t&&o(e,t)}(e,null,[{key:"serialize",value:function(e,n){if(!e.isA(n))throw new Error("serialize: not an ASTy node");return JSON.stringify({ASTy:function e(n){var t={T:n.T,L:{L:n.L.L,C:n.L.C,O:n.L.O}},o=Object.keys(n.A);return o.length>0&&(t.A={},o.forEach(function(e){var o=n.A[e];switch(r(o)){case"boolean":case"number":case"string":t.A[e]=o;break;default:t.A[e]=JSON.parse(JSON.stringify(o))}})),n.C.length>0&&(t.C=n.C.map(function(n){return e(n)})),t}(n)})}},{key:"unserialize",value:function(e,n){var t=JSON.parse(n);if("object"!==r(t)||"object"!==r(t.ASTy))throw new Error("unserialize: not an ASTy JSON export");return function n(t){var o=e.create(t.T);return o.pos(t.L.L,t.L.C,t.L.O),"object"===r(t.A)&&Object.keys(t.A).forEach(function(e){var n=t.A[e];switch(r(n)){case"boolean":case"number":case"string":o.set(e,n);break;default:o.set(e,JSON.parse(JSON.stringify(n)))}}),"object"===r(t.C)&&t.C instanceof Array&&o.add(t.C.map(function(e){return n(e)})),o}(t.ASTy)}}]),e}();t.default=i},{}],5:[function(e,n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={major:1,minor:8,micro:5,date:20190519};t.default=r},{}],6:[function(e,n,t){"use strict";function r(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,n,t){n&&r(e.prototype,n),t&&r(e,t)}(e,[{key:"walk",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"downward";return function t(r,o,i){"downward"!==n&&"both"!==n||e(r,o,i,"downward"),r.C.forEach(function(e){t(e,o+1,r)}),"upward"!==n&&"both"!==n||e(r,o,i,"upward")}(this,0,null),this}}]),e}();t.default=o},{}],7:[function(e,n,t){"use strict";var r=l(e("./asty-base.js")),o=l(e("./asty-merge.js")),i=l(e("./asty-walk.js")),a=l(e("./asty-dump.js")),u=l(e("./asty-serialize.js")),f=l(e("./asty-version.js"));function l(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function h(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var d=function(){function e(){var n=this;return s(this,e),this.ASTYNode=function e(){s(this,e)},[[r.default,"init","create","type","pos","set","unset","get","attrs","nth","ins","add","del","childs","child","parent","serialize"],[o.default,"merge"],[i.default,"walk"],[a.default,"dump"]].forEach(function(e){var t=e[0].prototype;e.slice(1).forEach(function(e){n.ASTYNode.prototype[e]=t[e]})}),this}return function(e,n,t){n&&h(e.prototype,n),t&&h(e,t)}(e,[{key:"version",value:function(){return f.default}},{key:"extend",value:function(e){for(var n in e)e.hasOwnProperty(n)&&(this.ASTYNode.prototype[n]=e[n]);return this}},{key:"create",value:function(e,n,t){return(new this.ASTYNode).init(this,e,n,t)}},{key:"isA",value:function(e){return"object"===c(e)&&e instanceof this.ASTYNode&&"boolean"==typeof e.ASTy&&!0===e.ASTy}},{key:"__serialize",value:function(n){return e.serialize(n)}}],[{key:"serialize",value:function(e){return u.default.serialize(e.ctx,e)}},{key:"unserialize",value:function(e){return u.default.unserialize(new this,e)}}]),e}();n.exports=d},{"./asty-base.js":1,"./asty-dump.js":2,"./asty-merge.js":3,"./asty-serialize.js":4,"./asty-version.js":5,"./asty-walk.js":6}]},{},[1,2,3,4,5,6,7])(7)});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],2:[function(_dereq_,module,exports){
(function (global){
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).CacheLRU=e()}}(function(){return function(){return function e(t,i,n){function r(u,s){if(!i[u]){if(!t[u]){var l="function"==typeof _dereq_&&_dereq_;if(!s&&l)return l(u,!0);if(o)return o(u,!0);var h=new Error("Cannot find module '"+u+"'");throw h.code="MODULE_NOT_FOUND",h}var a=i[u]={exports:{}};t[u][0].call(a.exports,function(e){return r(t[u][1][e]||e)},a,a.exports,e,t,i,n)}return i[u].exports}for(var o="function"==typeof _dereq_&&_dereq_,u=0;u<n.length;u++)r(n[u]);return r}}()({1:[function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._index={},this._LRU={newer:null},this._MRU={older:null},this._LRU.newer=this._MRU,this._MRU.older=this._LRU,this._cur=0,this._max=1/0,this._dispose=function(){},this}return function(e,t,i){t&&n(e.prototype,t),i&&n(e,i)}(e,[{key:"limit",value:function(e){var t=this._max;return arguments.length>0&&(this._max=e,this._purge()),t}},{key:"dispose",value:function(e){return this._dispose=e,this}},{key:"length",value:function(){return this._cur}},{key:"keys",value:function(){return this.each(function(e,t){this.push(t)},[])}},{key:"values",value:function(){return this.each(function(e){this.push(e)},[])}},{key:"each",value:function(e,t){arguments<2&&(t=this);for(var i=0,n=this._MRU.older;n!==this._LRU;)e.call(t,n.val,n.key,i++),n=n.older;return t}},{key:"has",value:function(e){return void 0!==this._index[e]}},{key:"peek",value:function(e){var t=this._index[e];if(void 0!==t){if(!(t.expires<Date.now()))return t.val;this.del(t.key)}}},{key:"touch",value:function(e){var t=this._index[e];if(void 0===t)throw new Error("touch: no such item");return this._promote(t),this}},{key:"get",value:function(e){var t=this._index[e];if(void 0!==t){if(!(t.expires<Date.now()))return this._promote(t),t.val;this.del(t.key)}}},{key:"set",value:function(e,t,i){arguments.length<3&&(i=1/0),i+=Date.now();var n=this._index[e];if(void 0===n)n={older:null,newer:null,key:e,val:t,expires:i},this._index[e]=n,this._attach(n),this._cur++,this._purge();else{var r=n.val;n.val=t,this._promote(n),this._dispose.call(void 0,n.key,r,"set")}return this}},{key:"del",value:function(e){var t=this._index[e];if(void 0===t)throw new Error("del: no such item");return delete this._index[e],this._detach(t),this._cur--,this._dispose.call(void 0,e,t.val,"del"),this}},{key:"clear",value:function(){for(;this._cur>0;)this.del(this._LRU.newer.key);return this}},{key:"_purge",value:function(){for(;this._cur>this._max;)this.del(this._LRU.newer.key)}},{key:"_promote",value:function(e){this._detach(e),this._attach(e)}},{key:"_detach",value:function(e){e.older.newer=e.newer,e.newer.older=e.older,e.older=null,e.newer=null}},{key:"_attach",value:function(e){e.older=this._MRU.older,e.newer=this._MRU,e.newer.older=e,e.older.newer=e}}]),e}();t.exports=r},{}]},{},[1])(1)});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],3:[function(_dereq_,module,exports){
(function (global){
!function(e,n,r){"object"==typeof module&&"object"==typeof module.exports?module.exports=r():"function"==typeof define&&void 0!==define.amd?define("PEGUtil",function(){return r()}):e.PEGUtil=r()}("undefined"!=typeof global?global:"undefined"!=typeof window?window:this,0,function(){var e={makeAST:function(e,n){return function(){return n.util.__makeAST.call(null,e().start.line,e().start.column,e().start.offset,arguments)}},makeUnroll:function(e,n){return function(r,t,o){if("object"!=typeof t||!(t instanceof Array))throw new n.util.__SyntaxError("unroll: invalid list argument for unrolling",typeof t,"Array",e());if(void 0!==o){"number"==typeof o&&(o=[o]);var l=[];null!==r&&l.push(r);for(var a=0;a<t.length;a++)for(var i=0;i<o.length;i++)l.push(t[a][o[i]]);return l}return null!==r&&t.unshift(r),t}}},n=function(e,n){var r=e.length,t=n-20;t<0&&(t=0);var o=n+20;o>r&&(o=r);var l=function(e){return e.charCodeAt(0).toString(16).toUpperCase()},a=function(e,n,r){return e.substr(n,r).replace(/\\/g,"\\\\").replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(e){return"\\x0"+l(e)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(e){return"\\x"+l(e)}).replace(/[\u0100-\u0FFF]/g,function(e){return"\\u0"+l(e)}).replace(/[\u1000-\uFFFF]/g,function(e){return"\\u"+l(e)})};return{prolog:a(e,t,n-t),token:a(e,n,1),epilog:a(e,n+1,o-(n+1))}};return e.parse=function(r,t,o){if("object"!=typeof r)throw new Error("invalid parser object (not an object)");if("function"!=typeof r.parse)throw new Error('invalid parser object (no "parse" function)');if("string"!=typeof t)throw new Error("invalid input text (not a string)");if(void 0!==o&&"object"!=typeof o)throw new Error("invalid options (not an object)");void 0===o&&(o={});var l={ast:null,error:null};try{var a;a="function"==typeof o.makeAST?o.makeAST:function(e,n){return{line:e().start.line,column:e().start.column,offset:e().start.offset,args:n}},o.util={makeUnroll:e.makeUnroll,makeAST:e.makeAST,__makeAST:a,__SyntaxError:r.SyntaxError},l.ast=r.parse(t,o),l.error=null}catch(e){if(l.ast=null,e instanceof r.SyntaxError){var i=function(e,n){return void 0!==e?e:n};l.error={line:i(e.location.start.line,0),column:i(e.location.start.column,0),message:e.message,found:i(e.found,""),expected:i(e.expected,""),location:n(t,i(e.location.start.offset,0))}}else l.error={line:0,column:0,message:e.message,found:"",expected:"",location:n("",0)}}return l},e.errorMessage=function(e,n){for(var r=e.location,t="line "+e.line+" (column "+e.column+"): ",o="",l=0;l<t.length+r.prolog.length;l++)o+="-";return t+r.prolog+r.token+r.epilog+"\n"+o+"^\n"+e.message+(n?"":"\n")},e});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],4:[function(_dereq_,module,exports){
"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var ASTQAdapterASTY=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"taste",value:function(e){return"object"===_typeof(e)&&null!==e&&"boolean"==typeof e.ASTy}},{key:"getParentNode",value:function(e){return e.parent()}},{key:"getChildNodes",value:function(e){return e.childs()}},{key:"getNodeType",value:function(e){return e.type()}},{key:"getNodeAttrNames",value:function(e){return e.attrs()}},{key:"getNodeAttrValue",value:function(e,t){return e.get(t)}}]),e}();exports.default=ASTQAdapterASTY;
},{}],5:[function(_dereq_,module,exports){
"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var ASTQAdapterCheerio=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"taste",value:function(e){return"object"===_typeof(e)&&null!==e&&!("object"===("undefined"==typeof Node?"undefined":_typeof(Node))&&e instanceof Node)&&"string"==typeof e.tagName&&""!==e.tagName}},{key:"getParentNode",value:function(e){return e.parentNode}},{key:"getChildNodes",value:function(e){return"object"===_typeof(e.childNodes)&&e.childNodes instanceof Array?e.childNodes:[]}},{key:"getNodeType",value:function(e){return e.tagName||"#".concat(e.type||"unknown")}},{key:"getNodeAttrNames",value:function(e){var t=["value"];return"object"===_typeof(e.attribs)&&(t=t.concat(Object.keys(e.attribs))),t}},{key:"getNodeAttrValue",value:function(e,t){var o;return"value"===t?o=e.nodeValue:"object"===_typeof(e.attribs)&&(o=e.attribs[t]),o}}]),e}();exports.default=ASTQAdapterCheerio;
},{}],6:[function(_dereq_,module,exports){
"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var ASTQAdapterGraphQL=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"taste",value:function(e){return"object"===_typeof(e)&&null!==e&&"string"==typeof e.kind&&""!==e.kind}},{key:"getParentNode",value:function(e,t){throw new Error("GraphQL AST does not support parent node traversal")}},{key:"getChildNodes",value:function(e,t){var o=this,r=[],n=function(e,t){e.hasOwnProperty(t)&&o.taste(e[t])?r.push(e[t]):e.hasOwnProperty(t)&&"object"===_typeof(e[t])&&e[t]instanceof Array&&e[t].forEach(function(e){o.taste(e)&&r.push(e)})};if("*"===t)for(var a in e)n(e,a);else void 0!==e[t]&&n(e,t);return r}},{key:"getNodeType",value:function(e){return e.kind}},{key:"getNodeAttrNames",value:function(e){var t=[];for(var o in e)e.hasOwnProperty(o)&&"object"!==_typeof(e[o])&&"kind"!==o&&"loc"!==o&&t.push(o);return t}},{key:"getNodeAttrValue",value:function(e,t){return e.hasOwnProperty(t)&&"object"!==_typeof(e[t])&&"kind"!==t&&"loc"!==t?e[t]:void 0}}]),e}();exports.default=ASTQAdapterGraphQL;
},{}],7:[function(_dereq_,module,exports){
"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var ASTQAdapterJSON=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"taste",value:function(e){return"object"===_typeof(e)&&null!==e}},{key:"getParentNode",value:function(e,t){throw new Error("JSON does not support parent node traversal")}},{key:"getChildNodes",value:function(e,t){var o=this,n=[],r=function(e,t){e.hasOwnProperty(t)&&o.taste(e[t])?n.push(e[t]):e.hasOwnProperty(t)&&"object"===_typeof(e[t])&&e[t]instanceof Array&&e[t].forEach(function(e){o.taste(e)&&n.push(e)})};if("*"===t)for(var a in e)r(e,a);else void 0!==e[t]&&r(e,t);return n}},{key:"getNodeType",value:function(e){return null===e?"Null":e instanceof Boolean?"Boolean":e instanceof Number?"Number":e instanceof String?"String":"object"===_typeof(e)?e instanceof Array?"Array":"function"==typeof e.constructor&&"string"==typeof e.constructor.name?e.constructor.name:"Object":"Unknown"}},{key:"getNodeAttrNames",value:function(e){var t=[];for(var o in e)e.hasOwnProperty(o)&&"object"!==_typeof(e[o])&&t.push(o);return t}},{key:"getNodeAttrValue",value:function(e,t){return e.hasOwnProperty(t)&&"object"!==_typeof(e[t])?e[t]:void 0}}]),e}();exports.default=ASTQAdapterJSON;
},{}],8:[function(_dereq_,module,exports){
"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var ASTQAdapterMozAST=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"taste",value:function(e){return"object"===_typeof(e)&&null!==e&&"string"==typeof e.type&&""!==e.type}},{key:"getParentNode",value:function(e,t){if("*"!==t&&"parent"!==t)throw new Error('no such axis named "'+t+'" for walking to parent nodes');if(void 0!==e.parent)return e.parent;throw new Error("Your Mozilla SpiderMonkey AST does not support parent node traversal")}},{key:"getChildNodes",value:function(e,t){var o=this,r=[],n=function(e,t){e.hasOwnProperty(t)&&o.taste(e[t])?r.push(e[t]):e.hasOwnProperty(t)&&"object"===_typeof(e[t])&&e[t]instanceof Array&&e[t].forEach(function(e){o.taste(e)&&r.push(e)})};if("*"===t)for(var a in e)n(e,a);else void 0!==e[t]&&n(e,t);return r}},{key:"getNodeType",value:function(e){return e.type}},{key:"getNodeAttrNames",value:function(e){var t=[];for(var o in e)e.hasOwnProperty(o)&&"object"!==_typeof(e[o])&&"type"!==o&&"loc"!==o&&t.push(o);return t}},{key:"getNodeAttrValue",value:function(e,t){return e.hasOwnProperty(t)&&"object"!==_typeof(e[t])&&"type"!==t&&"loc"!==t?e[t]:void 0}}]),e}();exports.default=ASTQAdapterMozAST;
},{}],9:[function(_dereq_,module,exports){
"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var ASTQAdapterParse5=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"taste",value:function(e){return"object"===_typeof(e)&&null!==e&&!("object"===("undefined"==typeof Node?"undefined":_typeof(Node))&&e instanceof Node)&&"string"==typeof e.nodeName&&""!==e.nodeName}},{key:"getParentNode",value:function(e){return e.parentNode}},{key:"getChildNodes",value:function(e){return"object"===_typeof(e.childNodes)&&e.childNodes instanceof Array?e.childNodes:[]}},{key:"getNodeType",value:function(e){return e.nodeName}},{key:"getNodeAttrNames",value:function(e){var t=["value"];return"object"===_typeof(e.attrs)&&e.attrs instanceof Array&&(t=t.concat(e.attrs.map(function(e){return e.name}))),t}},{key:"getNodeAttrValue",value:function(e,t){var n;if("value"===t)n=e.value;else if("object"===_typeof(e.attrs)&&e.attrs instanceof Array){var o=e.attrs.filter(function(e){return e.name===t}).map(function(e){return e.value});1===o.length&&(n=o[0])}return n}}]),e}();exports.default=ASTQAdapterParse5;
},{}],10:[function(_dereq_,module,exports){
"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var ASTQAdapterXMLDOM=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"taste",value:function(e){return"object"===("undefined"==typeof Node?"undefined":_typeof(Node))&&null!==e&&e instanceof Node&&"object"===_typeof(e)&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName}},{key:"getParentNode",value:function(e){return e.parentNode}},{key:"getChildNodes",value:function(e){return"object"===_typeof(e.childNodes)&&null!==e.childNodes&&e.hasChildNodes()?Array.prototype.slice.call(e.childNodes,0):[]}},{key:"getNodeType",value:function(e){return"string"==typeof e.nodeName?e.nodeName:"unknown"}},{key:"getNodeAttrNames",value:function(e){return"object"===_typeof(e.attributes)&&null!==e.attributes&&e.hasAttributes()?Array.prototype.slice.call(e.attributes,0).map(function(e){return e.nodeName}):[]}},{key:"getNodeAttrValue",value:function(e,t){return"object"===_typeof(e.attributes)&&null!==e.attributes&&e.hasAttributes()?e.getAttribute(t):void 0}}]),e}();exports.default=ASTQAdapterXMLDOM;
},{}],11:[function(_dereq_,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var ASTQAdapter=function(){function e(){return _classCallCheck(this,e),this._adapters=[],this}return _createClass(e,[{key:"register",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._adapters.unshift({adapter:e,force:t}),this}},{key:"unregister",value:function(e){if(void 0===e)this._adapters=[];else{for(var t=[],r=0;r<this._adapters.length;r++)this._adapters[r].adapter!==e&&t.push(this._adapters[r]);this._adapters=t}return this}},{key:"select",value:function(e){for(var t=0;t<this._adapters.length;t++)if(this._adapters[t].force||this._adapters[t].adapter.taste(e))return this._adapters[t].adapter}}]),e}();exports.default=ASTQAdapter;
},{}],12:[function(_dereq_,module,exports){
"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _pos=function(t,n){var e=t.getParentNode(n,"*");if(null===e)return 1;for(var r=t.getChildNodes(e,"*"),o=0;o<r.length;o++)if(r[o]===n)return o+1;throw new Error("cannot find myself")},parents=function(t,n){for(var e=[];null!==(n=t.getParentNode(n,"*"));)e.push(n);return e},stdfuncs={type:function(t,n){return t.getNodeType(n)},attrs:function(t,n,e){return void 0===e&&(e=" "),e+t.getNodeAttrNames(n).join(e)+e},depth:function(t,n){for(var e=1,r=n;null!==(r=t.getParentNode(r,"*"));)e++;return e},pos:function(t,n){return _pos(t,n)},nth:function(t,n,e){e=parseInt(e,10);var r=t.getParentNode(n,"*");if(null!==r){var o=t.getChildNodes(r,"*");e<0&&(e=o.length-(e+1));for(var u=0;u<o.length;u++)if(o[u]===n)return u+1===e;return!1}return 1===e},first:function(t,n){return stdfuncs.nth(t,n,1)},last:function(t,n){return stdfuncs.nth(t,n,-1)},count:function(t,n,e){return"object"===_typeof(e)&&e instanceof Array?e.length:"object"===_typeof(e)?Object.keys(e).length:"string"==typeof e?e.length:String(e).length},below:function(t,n,e){if(!t.taste(e))throw new Error('invalid argument to function "below" (node expected)');for(var r=n;null!==(r=t.getParentNode(r,"*"));)if(r===e)return!0;return!1},follows:function(t,n,e){if(!t.taste(e))throw new Error('invalid argument to function "follows" (node expected)');if(n===e)return!1;var r,o=[n].concat(parents(t,n)).reverse(),u=[e].concat(parents(t,e)).reverse(),f=Math.min(o.length,u.length);for(r=0;r<f&&o[r]===u[r];r++);if(0===r)throw new Error("internal error: root nodes have to be same same");return r===f?u.length<o.length:_pos(t,o[r])>_pos(t,u[r])},in:function(t,n,e){if(!("object"===_typeof(e)&&e instanceof Array))throw new Error('invalid argument to function "in" (array expected)');for(var r=0;r<e.length;r++)if(e[r]===n)return!0;return!1},substr:function(t,n,e,r,o){return String(e).substr(r,o)},index:function(t,n,e,r,o){return String(e).indexOf(r,o)},trim:function(t,n,e){return String(e).trim()},lc:function(t,n,e){return String(e).toLowerCase()},uc:function(t,n,e){return String(e).toUpperCase()}},_default=stdfuncs;exports.default=_default;
},{}],13:[function(_dereq_,module,exports){
"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var r=0;r<n.length;r++){var t=n[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function _createClass(e,n,r){return n&&_defineProperties(e.prototype,n),r&&_defineProperties(e,r),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var ASTQFuncs=function(){function e(){return _classCallCheck(this,e),this._funcs={},this}return _createClass(e,[{key:"register",value:function(e,n){this._funcs[e]=n}},{key:"run",value:function(e,n){var r=this._funcs[e];if("function"!=typeof r)throw new Error('invalid function "'+e+'"');return r.apply(null,n)}}]),e}();exports.default=ASTQFuncs;
},{}],14:[function(_dereq_,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _astqUtil=_interopRequireDefault(_dereq_("./astq-util.js")),_astqQueryTrace=_interopRequireDefault(_dereq_("./astq-query-trace.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ASTQQueryExec=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,_astqQueryTrace["default"]),_createClass(t,[{key:"execQuery",value:function(e,t){var r=this;this.traceBegin(e,t);var a=[];return e.childs().forEach(function(e){a=a.concat(r.execPath(e,t))}),this.traceEnd(e,t,a),a}},{key:"execPath",value:function(e,t){var r=this;this.traceBegin(e,t);var a=[t],i=[],n=!1;return e.childs().forEach(function(e){var t=[];a.forEach(function(a){t=t.concat(r.execStep(e,a))}),a=t,e.get("isResult")&&(n=!0,i=i.concat(a))}),this.traceEnd(e,t,a),n?i:a}},{key:"execStep",value:function(e,t){var r=this;this.traceBegin(e,t);var a=e.childs(),i=null,n=null,c=null,s=0;if(s<a.length&&"Axis"===a[s].type()&&(i=a[s++]),s<a.length&&"Match"===a[s].type()&&(n=a[s++]),s<a.length&&"Filter"===a[s].type()&&(c=a[s++]),null===n)throw new Error("no matching part in query step");var l=[],u=n.get("id"),o=function(e){var t=r.adapter.getNodeType(e);if("*"===u||u===t){var a=!0;null!==c&&(r.execFilter(c,e)||(a=!1)),a&&l.push(e)}};if(null!==i){var h=i.get("op"),f=i.get("type");if("/"===h)this.adapter.getChildNodes(t,f).forEach(function(e){return o(e)});else if("//"===h){this.adapter.getChildNodes(t,f).forEach(function(e){return function e(t){o(t),r.adapter.getChildNodes(t,f).forEach(function(t){return e(t)})}(e)})}else if("./"===h)o(t),this.adapter.getChildNodes(t,f).forEach(function(e){return o(e)});else if(".//"===h){o(t);this.adapter.getChildNodes(t,f).forEach(function(e){return function e(t){o(t),r.adapter.getChildNodes(t,f).forEach(function(t){return e(t)})}(e)})}else if("-/"===h){var d=this.adapter.getParentNode(t,"*");if(null!==d){for(var p=this.adapter.getChildNodes(d,f),x=null,g=0;g<p.length&&p[g]!==t;g++)x=p[g];null!==x&&o(x)}}else if("-//"===h){var E=this.adapter.getParentNode(t,"*");if(null!==E){for(var y=this.adapter.getChildNodes(E,f),v=0;v<y.length&&y[v]!==t;v++);for(v--;v>=0;v--)o(y[v])}}else if("+/"===h){var b=this.adapter.getParentNode(t,"*");if(null!==b){var _,k=this.adapter.getChildNodes(b,f);for(_=0;_<k.length&&k[_]!==t;_++);_<k.length&&o(k[++_])}}else if("+//"===h){var m=this.adapter.getParentNode(t,"*");if(null!==m){var q,U=this.adapter.getChildNodes(m,f);for(q=0;q<U.length&&U[q]!==t;q++);if(q<U.length)for(q++;q<U.length;q++)o(U[q])}}else if("~/"===h){var C=this.adapter.getParentNode(t,"*");if(null!==C){var P,N=this.adapter.getChildNodes(C,f);for(P=0;P<N.length&&N[P]!==t;P++);P>0&&o(N[P-1]),P<N.length-1&&o(N[P+1])}}else if("~//"===h){var B=this.adapter.getParentNode(t,"*");if(null!==B)for(var w=this.adapter.getChildNodes(B,f),O=0;O<w.length;O++)w[O]!==t&&o(w[O])}else if("../"===h){var L=this.adapter.getParentNode(t,f);null!==L&&o(L)}else if("..//"===h)for(var R=t;;){var S=this.adapter.getParentNode(R,f);if(null===S)break;o(S),R=S}else if("<//"===h){for(var T={sentinel:t,take:!0};;){var j=this.adapter.getParentNode(t,"*");if(null===j)break;t=j}t!==T.sentinel&&(o(t),this.adapter.getChildNodes(t,f).forEach(function(e){return function e(t){t===T.sentinel&&(T.take=!1),T.take&&o(t),T.take&&r.adapter.getChildNodes(t,f).forEach(function(t){return e(t)})}(e)})),l=l.reverse()}else if(">//"===h){for(var A={sentinel:t,take:!1};;){var Q=this.adapter.getParentNode(t,"*");if(null===Q)break;t=Q}this.adapter.getChildNodes(t,f).forEach(function(e){return function e(t){A.take&&o(t),t===A.sentinel&&(A.take=!0),r.adapter.getChildNodes(t,f).forEach(function(t){return e(t)})}(e)})}}else o(t);return this.traceEnd(e,t,l),l}},{key:"execFilter",value:function(e,t){this.traceBegin(e,t);var r=e.childs()[0],a=this.execExpr(r,t);return a=_astqUtil.default.truthy(a),this.traceEnd(e,t,a),a}},{key:"execExpr",value:function(e,t){switch(e.type()){case"ConditionalBinary":return this.execExprConditionalBinary(e,t);case"ConditionalTernary":return this.execExprConditionalTernary(e,t);case"Logical":return this.execExprLogical(e,t);case"Bitwise":return this.execExprBitwise(e,t);case"Relational":return this.execExprRelational(e,t);case"Arithmetical":return this.execExprArithmetical(e,t);case"Unary":return this.execExprUnary(e,t);case"FuncCall":return this.execExprFuncCall(e,t);case"Attribute":return this.execExprAttribute(e,t);case"Param":return this.execExprParam(e,t);case"LiteralString":return this.execExprLiteralString(e,t);case"LiteralRegExp":return this.execExprLiteralRegExp(e,t);case"LiteralNumber":return this.execExprLiteralNumber(e,t);case"LiteralValue":return this.execExprLiteralValue(e,t);case"Path":return this.execExprPath(e,t)}}},{key:"execExprConditionalBinary",value:function(e,t){this.traceBegin(e,t);var r=this.execExpr(e.childs()[0],t);return _astqUtil.default.truthy(r)||(r=this.execExpr(e.childs()[1],t)),this.traceEnd(e,t,r),r}},{key:"execExprConditionalTernary",value:function(e,t){this.traceBegin(e,t);var r=this.execExpr(e.childs()[0],t);return r=_astqUtil.default.truthy(r)?this.execExpr(e.childs()[1],t):this.execExpr(e.childs()[2],t),this.traceEnd(e,t,r),r}},{key:"execExprLogical",value:function(e,t){this.traceBegin(e,t);var r=!1;switch(e.get("op")){case"&&":(r=_astqUtil.default.truthy(this.execExpr(e.childs()[0],t)))&&(r=r&&_astqUtil.default.truthy(this.execExpr(e.childs()[1],t)));break;case"||":(r=_astqUtil.default.truthy(this.execExpr(e.childs()[0],t)))||(r=r||_astqUtil.default.truthy(this.execExpr(e.childs()[1],t)))}return this.traceEnd(e,t,r),r}},{key:"execExprBitwise",value:function(e,t){this.traceBegin(e,t);var r,a=_astqUtil.default.coerce(this.execExpr(e.childs()[0],t),"number"),i=_astqUtil.default.coerce(this.execExpr(e.childs()[1],t),"number");switch(e.get("op")){case"&":r=a&i;break;case"|":r=a|i;break;case"<<":r=a<<i;break;case">>":r=a>>i}return this.traceEnd(e,t,r),r}},{key:"execExprRelational",value:function(e,t){this.traceBegin(e,t);var r,a=this.execExpr(e.childs()[0],t),i=this.execExpr(e.childs()[1],t);switch(e.get("op")){case"==":r=a===i;break;case"!=":r=a!==i;break;case"<=":r=_astqUtil.default.coerce(a,"number")<=_astqUtil.default.coerce(i,"number");break;case">=":r=_astqUtil.default.coerce(a,"number")>=_astqUtil.default.coerce(i,"number");break;case"<":r=_astqUtil.default.coerce(a,"number")<_astqUtil.default.coerce(i,"number");break;case">":r=_astqUtil.default.coerce(a,"number")>_astqUtil.default.coerce(i,"number");break;case"=~":r=null!==_astqUtil.default.coerce(a,"string").match(_astqUtil.default.coerce(i,"regexp"));break;case"!~":r=null===_astqUtil.default.coerce(a,"string").match(_astqUtil.default.coerce(i,"regexp"))}return this.traceEnd(e,t,r),r}},{key:"execExprArithmetical",value:function(e,t){this.traceBegin(e,t);var r,a=this.execExpr(e.childs()[0],t),i=this.execExpr(e.childs()[1],t);switch(e.get("op")){case"+":r="string"==typeof a?a+_astqUtil.default.coerce(i,"string"):_astqUtil.default.coerce(a,"number")+_astqUtil.default.coerce(i,"number");break;case"-":r=_astqUtil.default.coerce(a,"number")+_astqUtil.default.coerce(i,"number");break;case"*":r=_astqUtil.default.coerce(a,"number")*_astqUtil.default.coerce(i,"number");break;case"/":r=_astqUtil.default.coerce(a,"number")/_astqUtil.default.coerce(i,"number");break;case"%":r=_astqUtil.default.coerce(a,"number")%_astqUtil.default.coerce(i,"number");break;case"**":r=Math.pow(_astqUtil.default.coerce(a,"number"),_astqUtil.default.coerce(i,"number"))}return this.traceEnd(e,t,r),r}},{key:"execExprUnary",value:function(e,t){this.traceBegin(e,t);var r,a=this.execExpr(e.childs()[0],t);switch(e.get("op")){case"!":r=!_astqUtil.default.coerce(a,"boolean");break;case"~":r=~_astqUtil.default.coerce(a,"number")}return this.traceEnd(e,t,r),r}},{key:"execExprFuncCall",value:function(e,t){var r=this;this.traceBegin(e,t);var a=e.get("id"),i=[this.adapter,t];e.childs().forEach(function(e){i.push(r.execExpr(e,t))});var n=this.funcs.run(a,i);return this.traceEnd(e,t,n),n}},{key:"execExprAttribute",value:function(e,t){this.traceBegin(e,t);var r=e.get("id"),a=this.adapter.getNodeAttrValue(t,r);return this.traceEnd(e,t,a),a}},{key:"execExprParam",value:function(e,t){this.traceBegin(e,t);var r=e.get("id");if(void 0===this.params[r])throw new Error('invalid parameter "'+r+'"');var a=this.params[r];return this.traceEnd(e,t,a),a}},{key:"execExprLiteralString",value:function(e,t){this.traceBegin(e,t);var r=e.get("value");return this.traceEnd(e,t,r),r}},{key:"execExprLiteralRegExp",value:function(e,t){this.traceBegin(e,t);var r=e.get("value");return this.traceEnd(e,t,r),r}},{key:"execExprLiteralNumber",value:function(e,t){this.traceBegin(e,t);var r=e.get("value");return this.traceEnd(e,t,r),r}},{key:"execExprLiteralValue",value:function(e,t){this.traceBegin(e,t);var r=e.get("value");return this.traceEnd(e,t,r),r}},{key:"execExprPath",value:function(e,t){this.traceBegin(e,t);var r=this.execPath(e,t);return this.traceEnd(e,t,r),r}}]),t}();exports.default=ASTQQueryExec;
},{"./astq-query-trace.js":15,"./astq-util.js":17}],15:[function(_dereq_,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _astqUtil=_interopRequireDefault(_dereq_("./astq-util.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}var ASTQQueryTrace=function(){function e(t,r,o,a){_classCallCheck(this,e),this.adapter=t,this.params=r,this.funcs=o,this.trace=a}return _createClass(e,[{key:"prefixOf",value:function(e,t){for(var r=0,o=e;null!==(o=o.parent());)r++;var a=_astqUtil.default.pad("",4*r),n=0;for(o=t;null!==(o=this.adapter.getParentNode(o,"*"));)n++;return{prefix1:a,prefix2:_astqUtil.default.pad("",4*n),nodeDepth:r,queryNodeDepth:n}}},{key:"traceBegin",value:function(e,t){if(this.trace){var r=this.prefixOf(e,t),o=r.prefix1,a=r.prefix2,n=r.nodeDepth,i=r.queryNodeDepth,p="ASTQ: execute: | "+_astqUtil.default.pad(o+e.type()+" (",-60)+" | "+a+this.adapter.getNodeType(t);"function"==typeof this.trace?this.trace({event:"beginStep",nodeDepth:n,queryNodeDepth:i,queryNode:e,node:t,timestamp:Date.now(),traceMsg:p}):console.log(p)}}},{key:"traceEnd",value:function(e,t,r){var o=this;if(this.trace){var a,n=this.prefixOf(e,t),i=n.prefix1,p=n.prefix2,f=n.nodeDepth,u=n.queryNodeDepth,s=[];void 0===r?a="undefined":"object"===_typeof(r)&&r instanceof Array?(a="[",r.forEach(function(e){a+="node("+o.adapter.getNodeType(e)+"),",s.push(o.adapter.getNodeType(e))}),a=a.replace(/,$/,"")+"]"):a=_typeof(r)+"("+r+")",a.length>60&&(a=a.substr(0,60)+"...");var c="ASTQ: execute: | "+_astqUtil.default.pad(i+"): "+a,-60)+" | "+p+this.adapter.getNodeType(t);"function"==typeof this.trace?this.trace({event:"endStep",nodeDepth:f,queryNodeDepth:u,queryNode:e,node:t,timestamp:Date.now(),traceMsg:c,matches:r}):console.log(c)}}}]),e}();exports.default=ASTQQueryTrace;
},{"./astq-util.js":17}],16:[function(_dereq_,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _asty=_interopRequireDefault(_dereq_("asty")),_pegjsUtil=_interopRequireDefault(_dereq_("pegjs-util")),_astqQueryExec=_interopRequireDefault(_dereq_("./astq-query-exec.js"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),t}var ASTQQueryParse=function(){function t(e,r,n,u){this.message=e,this.expected=r,this.found=n,this.location=u,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t)}return function(t,e){function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r}(t,Error),t.buildMessage=function(t,e){var r={literal:function(t){return'"'+u(t.text)+'"'},class:function(t){var e,r="";for(e=0;e<t.parts.length;e++)r+=t.parts[e]instanceof Array?s(t.parts[e][0])+"-"+s(t.parts[e][1]):s(t.parts[e]);return"["+(t.inverted?"^":"")+r+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},other:function(t){return t.description}};function n(t){return t.charCodeAt(0).toString(16).toUpperCase()}function u(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+n(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+n(t)})}function s(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+n(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+n(t)})}return"Expected "+function(t){var e,n,u,s=new Array(t.length);for(e=0;e<t.length;e++)s[e]=(u=t[e],r[u.type](u));if(s.sort(),s.length>0){for(e=1,n=1;e<s.length;e++)s[e-1]!==s[e]&&(s[n]=s[e],n++);s.length=n}switch(s.length){case 1:return s[0];case 2:return s[0]+" or "+s[1];default:return s.slice(0,-1).join(", ")+", or "+s[s.length-1]}}(t)+" but "+function(t){return t?'"'+u(t)+'"':"end of input"}(e)+" found."},{SyntaxError:t,parse:function(e,r){r=void 0!==r?r:{};var n,u={},s={query:Un},a=Un,o=function(t){return t},i=",",c=Ln(",",!1),l=function(t,e){return du("Query").add(pu(t,e,3))},f=function(t,e){return du("Path").add(pu(t,e,1))},h="!",A=Ln("!",!1),p=function(t,e,r,n){return du("Step").add(t,e,n).set(null!==r?{isResult:!0}:{})},d=jn("axis"),x="//",b=Ln("//",!1),g="/",v=Ln("/",!1),P="-//",y=Ln("-//",!1),C="-/",m=Ln("-/",!1),S="+//",_=Ln("+//",!1),q="+/",w=Ln("+/",!1),T="~//",Q=Ln("~//",!1),N="~/",E=Ln("~/",!1),R="..//",k=Ln("..//",!1),F="../",L=Ln("../",!1),D=".//",j=Ln(".//",!1),M="./",z=Ln("./",!1),I="<//",O=Ln("<//",!1),U=">//",V=Ln(">//",!1),Z=function(t,e){return du("Axis").set({op:t,type:null!==e?e:"*"})},B=":",J=Ln(":",!1),$=function(t){return t.get("id")},G=function(t){return t.get("value")},H=function(t){return du("Match").merge(t)},K=function(t){return du("Match").set({id:t.get("value")})},W="*",X=Ln("*",!1),Y=function(){return du("Match").set({id:"*"})},tt="[",et=Ln("[",!1),rt="]",nt=Ln("]",!1),ut=function(t){return du("Filter").add(t)},st="?:",at=Ln("?:",!1),ot=function(t,e){return du("ConditionalBinary").add(t,e)},it="?",ct=Ln("?",!1),lt=function(t,e,r){return du("ConditionalTernary").add(t,e,r)},ft="||",ht=Ln("||",!1),At=function(t,e,r){return du("Logical").set({op:e}).add(t,r)},pt="&&",dt=Ln("&&",!1),xt="|",bt=Ln("|",!1),gt=function(t,e,r){return du("Bitwise").set({op:e}).add(t,r)},vt="^",Pt=Ln("^",!1),yt="&",Ct=Ln("&",!1),mt="==",St=Ln("==",!1),_t="!=",qt=Ln("!=",!1),wt="<=",Tt=Ln("<=",!1),Qt=">=",Nt=Ln(">=",!1),Et="<",Rt=Ln("<",!1),kt=">",Ft=Ln(">",!1),Lt="=~",Dt=Ln("=~",!1),jt="!~",Mt=Ln("!~",!1),zt=function(t,e,r){return du("Relational").set({op:e}).add(t,r)},It="<<",Ot=Ln("<<",!1),Ut=">>",Vt=Ln(">>",!1),Zt="+",Bt=Ln("+",!1),Jt="-",$t=Ln("-",!1),Gt=function(t,e,r){return du("Arithmetical").set({op:e}).add(t,r)},Ht="**",Kt=Ln("**",!1),Wt="%",Xt=Ln("%",!1),Yt="~",te=Ln("~",!1),ee=function(t,e){return du("Unary").set({op:t}).add(e)},re="(",ne=Ln("(",!1),ue=")",se=Ln(")",!1),ae=function(t,e){return du("FuncCall").merge(t).add(e)},oe=function(t,e){return pu(t,e,3)},ie=jn("node attribute"),ce="@",le=Ln("@",!1),fe=function(t){return du("Attribute").merge(t)},he=function(t){return du("Attribute").set({id:t.get("value")})},Ae=jn("query parameter reference"),pe="{",de=Ln("{",!1),xe="}",be=Ln("}",!1),ge=function(t){return du("Param").merge(t)},ve=function(t){return t},Pe=jn("identifier"),ye=/^[a-zA-Z_]/,Ce=Dn([["a","z"],["A","Z"],"_"],!1,!1),me=/^[a-zA-Z0-9_\-]/,Se=Dn([["a","z"],["A","Z"],["0","9"],"_","-"],!1,!1),_e=function(t){return du("Identifier").set({id:t})},qe=jn("quoted string literal"),we='"',Te=Ln('"',!1),Qe=/^[^"]/,Ne=Dn(['"'],!0,!1),Ee=function(t){return du("LiteralString").set({value:t.join("")})},Re="'",ke=Ln("'",!1),Fe=/^[^']/,Le=Dn(["'"],!0,!1),De=jn("escaped double-quoted-string character"),je="\\\\",Me=Ln("\\\\",!1),ze=function(){return"\\"},Ie='\\"',Oe=Ln('\\"',!1),Ue=function(){return'"'},Ve="\\b",Ze=Ln("\\b",!1),Be=function(){return"\b"},Je="\\v",$e=Ln("\\v",!1),Ge=function(){return"\v"},He="\\f",Ke=Ln("\\f",!1),We=function(){return"\f"},Xe="\\t",Ye=Ln("\\t",!1),tr=function(){return"\t"},er="\\r",rr=Ln("\\r",!1),nr=function(){return"\r"},ur="\\n",sr=Ln("\\n",!1),ar=function(){return"\n"},or="\\e",ir=Ln("\\e",!1),cr=function(){return""},lr="\\x",fr=Ln("\\x",!1),hr=/^[0-9a-fA-F]/,Ar=Dn([["0","9"],["a","f"],["A","F"]],!1,!1),pr=function(t){return String.fromCharCode(parseInt(t,16))},dr="\\u",xr=Ln("\\u",!1),br=jn("escaped single-quoted-string character"),gr="\\'",vr=Ln("\\'",!1),Pr=function(){return"'"},yr=jn("regular expression literal"),Cr="`",mr=Ln("`",!1),Sr="\\`",_r=Ln("\\`",!1),qr=/^[^`]/,wr=Dn(["`"],!0,!1),Tr=function(e){var r;try{r=new RegExp(e.replace(/\\`/g,"`"))}catch(e){!function(e,r){throw r=void 0!==r?r:zn(Tn,wn),function(e,r){return new t(e,null,null,r)}(e,r)}(e.message)}return du("LiteralRegExp").set({value:r})},Qr=jn("numeric literal"),Nr=/^[+\-]/,Er=Dn(["+","-"],!1,!1),Rr="0b",kr=Ln("0b",!1),Fr=/^[01]/,Lr=Dn(["0","1"],!1,!1),Dr=function(t,e){return du("LiteralNumber").set({value:parseInt(t+e,2)})},jr="0o",Mr=Ln("0o",!1),zr=/^[0-7]/,Ir=Dn([["0","7"]],!1,!1),Or=function(t,e){return du("LiteralNumber").set({value:parseInt(t+e,8)})},Ur="0x",Vr=Ln("0x",!1),Zr=function(t,e){return du("LiteralNumber").set({value:parseInt(t+e,16)})},Br=/^[0-9]/,Jr=Dn([["0","9"]],!1,!1),$r=".",Gr=Ln(".",!1),Hr=/^[eE]/,Kr=Dn(["e","E"],!1,!1),Wr=function(t){return du("LiteralNumber").set({value:parseFloat(t)})},Xr=function(t){return du("LiteralNumber").set({value:parseInt(t,10)})},Yr=jn("global value"),tn="true",en=Ln("true",!1),rn=function(){return du("LiteralValue").set({value:!0})},nn="false",un=Ln("false",!1),sn=function(){return du("LiteralValue").set({value:!1})},an="null",on=Ln("null",!1),cn=function(){return du("LiteralValue").set({value:null})},ln="NaN",fn=Ln("NaN",!1),hn=function(){return du("LiteralValue").set({value:NaN})},An="undefined",pn=Ln("undefined",!1),dn=function(){return du("LiteralValue").set({value:void 0})},xn=jn("optional blank"),bn=jn("multi-line comment"),gn="/*",vn=Ln("/*",!1),Pn="*/",yn=Ln("*/",!1),Cn={type:"any"},mn=jn("any whitespaces"),Sn=/^[ \t\r\n]/,_n=Dn([" ","\t","\r","\n"],!1,!1),qn=jn("end of file"),wn=0,Tn=0,Qn=[{line:1,column:1}],Nn=0,En=[],Rn=0,kn={};if("startRule"in r){if(!(r.startRule in s))throw new Error("Can't start parsing from rule \""+r.startRule+'".');a=s[r.startRule]}function Fn(){return zn(Tn,wn)}function Ln(t,e){return{type:"literal",text:t,ignoreCase:e}}function Dn(t,e,r){return{type:"class",parts:t,inverted:e,ignoreCase:r}}function jn(t){return{type:"other",description:t}}function Mn(t){var r,n=Qn[t];if(n)return n;for(r=t-1;!Qn[r];)r--;for(n={line:(n=Qn[r]).line,column:n.column};r<t;)10===e.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return Qn[t]=n,n}function zn(t,e){var r=Mn(t),n=Mn(e);return{start:{offset:t,line:r.line,column:r.column},end:{offset:e,line:n.line,column:n.column}}}function In(t){wn<Nn||(wn>Nn&&(Nn=wn,En=[]),En.push(t))}function On(e,r,n){return new t(t.buildMessage(e,r),e,r,n)}function Un(){var t,r,n=38*wn+0,s=kn[n];return s?(wn=s.nextPos,s.result):(t=wn,fu()!==u&&(r=function(){var t,r,n,s,a,o,f,h,A=38*wn+1,p=kn[A];if(p)return wn=p.nextPos,p.result;if(t=wn,(r=Vn())!==u){for(n=[],s=wn,(a=fu())!==u?(44===e.charCodeAt(wn)?(o=i,wn++):(o=u,0===Rn&&In(c)),o!==u&&(f=fu())!==u&&(h=Vn())!==u?s=a=[a,o,f,h]:(wn=s,s=u)):(wn=s,s=u);s!==u;)n.push(s),s=wn,(a=fu())!==u?(44===e.charCodeAt(wn)?(o=i,wn++):(o=u,0===Rn&&In(c)),o!==u&&(f=fu())!==u&&(h=Vn())!==u?s=a=[a,o,f,h]:(wn=s,s=u)):(wn=s,s=u);n!==u?(Tn=t,r=l(r,n),t=r):(wn=t,t=u)}else wn=t,t=u;return kn[A]={nextPos:wn,result:t},t}())!==u&&fu()!==u&&function(){var t,r,n=38*wn+37,s=kn[n];return s?(wn=s.nextPos,s.result):(Rn++,t=wn,Rn++,e.length>wn?(r=e.charAt(wn),wn++):(r=u,0===Rn&&In(Cn)),Rn--,r===u?t=void 0:(wn=t,t=u),Rn--,t===u&&(r=u,0===Rn&&In(qn)),kn[n]={nextPos:wn,result:t},t)}()!==u?(Tn=t,t=o(r)):(wn=t,t=u),kn[n]={nextPos:wn,result:t},t)}function Vn(){var t,r,n,s,a,o,i=38*wn+2,c=kn[i];if(c)return wn=c.nextPos,c.result;if(t=wn,(r=function(){var t,r,n,s,a,o=38*wn+3,i=kn[o];return i?(wn=i.nextPos,i.result):(t=wn,(r=Bn())===u&&(r=null),r!==u&&fu()!==u&&(n=Jn())!==u&&fu()!==u?(33===e.charCodeAt(wn)?(s=h,wn++):(s=u,0===Rn&&In(A)),s===u&&(s=null),s!==u&&fu()!==u?((a=$n())===u&&(a=null),a!==u?(Tn=t,r=p(r,n,s,a),t=r):(wn=t,t=u)):(wn=t,t=u)):(wn=t,t=u),kn[o]={nextPos:wn,result:t},t)}())!==u){for(n=[],s=wn,(a=fu())!==u&&(o=Zn())!==u?s=a=[a,o]:(wn=s,s=u);s!==u;)n.push(s),s=wn,(a=fu())!==u&&(o=Zn())!==u?s=a=[a,o]:(wn=s,s=u);n!==u?(Tn=t,t=r=f(r,n)):(wn=t,t=u)}else wn=t,t=u;return kn[i]={nextPos:wn,result:t},t}function Zn(){var t,r,n,s,a,o=38*wn+4,i=kn[o];return i?(wn=i.nextPos,i.result):(t=wn,(r=Bn())!==u&&fu()!==u&&(n=Jn())!==u&&fu()!==u?(33===e.charCodeAt(wn)?(s=h,wn++):(s=u,0===Rn&&In(A)),s===u&&(s=null),s!==u&&fu()!==u?((a=$n())===u&&(a=null),a!==u?(Tn=t,t=r=p(r,n,s,a)):(wn=t,t=u)):(wn=t,t=u)):(wn=t,t=u),kn[o]={nextPos:wn,result:t},t)}function Bn(){var t,r,n,s=38*wn+5,a=kn[s];return a?(wn=a.nextPos,a.result):(Rn++,t=wn,r=wn,e.substr(wn,2)===x?(n=x,wn+=2):(n=u,0===Rn&&In(b)),n===u&&(47===e.charCodeAt(wn)?(n=g,wn++):(n=u,0===Rn&&In(v)),n===u&&(e.substr(wn,3)===P?(n=P,wn+=3):(n=u,0===Rn&&In(y)),n===u&&(e.substr(wn,2)===C?(n=C,wn+=2):(n=u,0===Rn&&In(m)),n===u&&(e.substr(wn,3)===S?(n=S,wn+=3):(n=u,0===Rn&&In(_)),n===u&&(e.substr(wn,2)===q?(n=q,wn+=2):(n=u,0===Rn&&In(w)),n===u&&(e.substr(wn,3)===T?(n=T,wn+=3):(n=u,0===Rn&&In(Q)),n===u&&(e.substr(wn,2)===N?(n=N,wn+=2):(n=u,0===Rn&&In(E)),n===u&&(e.substr(wn,4)===R?(n=R,wn+=4):(n=u,0===Rn&&In(k)),n===u&&(e.substr(wn,3)===F?(n=F,wn+=3):(n=u,0===Rn&&In(L)),n===u&&(e.substr(wn,3)===D?(n=D,wn+=3):(n=u,0===Rn&&In(j)),n===u&&(e.substr(wn,2)===M?(n=M,wn+=2):(n=u,0===Rn&&In(z)),n===u&&(e.substr(wn,3)===I?(n=I,wn+=3):(n=u,0===Rn&&In(O)),n===u&&(e.substr(wn,3)===U?(n=U,wn+=3):(n=u,0===Rn&&In(V))))))))))))))),(r=n!==u?e.substring(r,wn):n)!==u?((n=function(){var t,r,n,s=38*wn+6,a=kn[s];return a?(wn=a.nextPos,a.result):(t=wn,58===e.charCodeAt(wn)?(r=B,wn++):(r=u,0===Rn&&In(J)),r!==u&&(n=au())!==u?(Tn=t,r=$(n),t=r):(wn=t,t=u),t===u&&(t=wn,58===e.charCodeAt(wn)?(r=B,wn++):(r=u,0===Rn&&In(J)),r!==u&&(n=ou())!==u?(Tn=t,r=G(n),t=r):(wn=t,t=u)),kn[s]={nextPos:wn,result:t},t)}())===u&&(n=null),n!==u?(Tn=t,t=r=Z(r,n)):(wn=t,t=u)):(wn=t,t=u),Rn--,t===u&&(r=u,0===Rn&&In(d)),kn[s]={nextPos:wn,result:t},t)}function Jn(){var t,r,n=38*wn+7,s=kn[n];return s?(wn=s.nextPos,s.result):(t=wn,(r=au())!==u&&(Tn=t,r=H(r)),(t=r)===u&&(t=wn,(r=ou())!==u&&(Tn=t,r=K(r)),(t=r)===u&&(t=wn,42===e.charCodeAt(wn)?(r=W,wn++):(r=u,0===Rn&&In(X)),r!==u&&(Tn=t,r=Y()),t=r)),kn[n]={nextPos:wn,result:t},t)}function $n(){var t,r,n,s,a=38*wn+8,o=kn[a];return o?(wn=o.nextPos,o.result):(t=wn,91===e.charCodeAt(wn)?(r=tt,wn++):(r=u,0===Rn&&In(et)),r!==u&&fu()!==u&&(n=Gn())!==u&&fu()!==u?(93===e.charCodeAt(wn)?(s=rt,wn++):(s=u,0===Rn&&In(nt)),s!==u?(Tn=t,t=r=ut(n)):(wn=t,t=u)):(wn=t,t=u),kn[a]={nextPos:wn,result:t},t)}function Gn(){var t,r,n,s,a,o,i=38*wn+9,c=kn[i];return c?(wn=c.nextPos,c.result):(t=wn,(r=Hn())!==u&&fu()!==u?(e.substr(wn,2)===st?(n=st,wn+=2):(n=u,0===Rn&&In(at)),n!==u&&fu()!==u&&(s=Hn())!==u?(Tn=t,t=r=ot(r,s)):(wn=t,t=u)):(wn=t,t=u),t===u&&(t=wn,(r=Hn())!==u&&fu()!==u?(63===e.charCodeAt(wn)?(n=it,wn++):(n=u,0===Rn&&In(ct)),n!==u&&fu()!==u&&(s=Hn())!==u&&fu()!==u?(58===e.charCodeAt(wn)?(a=B,wn++):(a=u,0===Rn&&In(J)),a!==u&&fu()!==u&&(o=Hn())!==u?(Tn=t,t=r=lt(r,s,o)):(wn=t,t=u)):(wn=t,t=u)):(wn=t,t=u),t===u&&(t=Hn())),kn[i]={nextPos:wn,result:t},t)}function Hn(){var t,r,n,s,a,o=38*wn+10,i=kn[o];return i?(wn=i.nextPos,i.result):(t=wn,(r=Kn())!==u&&fu()!==u?(n=wn,e.substr(wn,2)===ft?(s=ft,wn+=2):(s=u,0===Rn&&In(ht)),(n=s!==u?e.substring(n,wn):s)!==u&&(s=fu())!==u&&(a=Hn())!==u?(Tn=t,t=r=At(r,n,a)):(wn=t,t=u)):(wn=t,t=u),t===u&&(t=Kn()),kn[o]={nextPos:wn,result:t},t)}function Kn(){var t,r,n,s,a,o=38*wn+11,i=kn[o];return i?(wn=i.nextPos,i.result):(t=wn,(r=Wn())!==u&&fu()!==u?(n=wn,e.substr(wn,2)===pt?(s=pt,wn+=2):(s=u,0===Rn&&In(dt)),(n=s!==u?e.substring(n,wn):s)!==u&&(s=fu())!==u&&(a=Kn())!==u?(Tn=t,t=r=At(r,n,a)):(wn=t,t=u)):(wn=t,t=u),t===u&&(t=Wn()),kn[o]={nextPos:wn,result:t},t)}function Wn(){var t,r,n,s,a,o=38*wn+12,i=kn[o];return i?(wn=i.nextPos,i.result):(t=wn,(r=Xn())!==u&&fu()!==u?(n=wn,124===e.charCodeAt(wn)?(s=xt,wn++):(s=u,0===Rn&&In(bt)),(n=s!==u?e.substring(n,wn):s)!==u&&(s=fu())!==u&&(a=Wn())!==u?(Tn=t,t=r=gt(r,n,a)):(wn=t,t=u)):(wn=t,t=u),t===u&&(t=Xn()),kn[o]={nextPos:wn,result:t},t)}function Xn(){var t,r,n,s,a,o=38*wn+13,i=kn[o];return i?(wn=i.nextPos,i.result):(t=wn,(r=Yn())!==u&&fu()!==u?(n=wn,94===e.charCodeAt(wn)?(s=vt,wn++):(s=u,0===Rn&&In(Pt)),(n=s!==u?e.substring(n,wn):s)!==u&&(s=fu())!==u&&(a=Xn())!==u?(Tn=t,t=r=gt(r,n,a)):(wn=t,t=u)):(wn=t,t=u),t===u&&(t=Yn()),kn[o]={nextPos:wn,result:t},t)}function Yn(){var t,r,n,s,a,o=38*wn+14,i=kn[o];return i?(wn=i.nextPos,i.result):(t=wn,(r=tu())!==u&&fu()!==u?(n=wn,38===e.charCodeAt(wn)?(s=yt,wn++):(s=u,0===Rn&&In(Ct)),(n=s!==u?e.substring(n,wn):s)!==u&&(s=fu())!==u&&(a=Yn())!==u?(Tn=t,t=r=gt(r,n,a)):(wn=t,t=u)):(wn=t,t=u),t===u&&(t=tu()),kn[o]={nextPos:wn,result:t},t)}function tu(){var t,r,n,s,a,o=38*wn+15,i=kn[o];return i?(wn=i.nextPos,i.result):(t=wn,(r=eu())!==u&&fu()!==u?(n=wn,e.substr(wn,2)===mt?(s=mt,wn+=2):(s=u,0===Rn&&In(St)),s===u&&(e.substr(wn,2)===_t?(s=_t,wn+=2):(s=u,0===Rn&&In(qt)),s===u&&(e.substr(wn,2)===wt?(s=wt,wn+=2):(s=u,0===Rn&&In(Tt)),s===u&&(e.substr(wn,2)===Qt?(s=Qt,wn+=2):(s=u,0===Rn&&In(Nt)),s===u&&(60===e.charCodeAt(wn)?(s=Et,wn++):(s=u,0===Rn&&In(Rt)),s===u&&(62===e.charCodeAt(wn)?(s=kt,wn++):(s=u,0===Rn&&In(Ft)),s===u&&(e.substr(wn,2)===Lt?(s=Lt,wn+=2):(s=u,0===Rn&&In(Dt)),s===u&&(e.substr(wn,2)===jt?(s=jt,wn+=2):(s=u,0===Rn&&In(Mt))))))))),(n=s!==u?e.substring(n,wn):s)!==u&&(s=fu())!==u&&(a=tu())!==u?(Tn=t,t=r=zt(r,n,a)):(wn=t,t=u)):(wn=t,t=u),t===u&&(t=eu()),kn[o]={nextPos:wn,result:t},t)}function eu(){var t,r,n,s,a,o=38*wn+16,i=kn[o];return i?(wn=i.nextPos,i.result):(t=wn,(r=ru())!==u&&fu()!==u?(n=wn,e.substr(wn,2)===It?(s=It,wn+=2):(s=u,0===Rn&&In(Ot)),s===u&&(e.substr(wn,2)===Ut?(s=Ut,wn+=2):(s=u,0===Rn&&In(Vt))),(n=s!==u?e.substring(n,wn):s)!==u&&(s=fu())!==u&&(a=eu())!==u?(Tn=t,t=r=gt(r,n,a)):(wn=t,t=u)):(wn=t,t=u),t===u&&(t=ru()),kn[o]={nextPos:wn,result:t},t)}function ru(){var t,r,n,s,a,o=38*wn+17,i=kn[o];return i?(wn=i.nextPos,i.result):(t=wn,(r=nu())!==u&&fu()!==u?(n=wn,43===e.charCodeAt(wn)?(s=Zt,wn++):(s=u,0===Rn&&In(Bt)),s===u&&(45===e.charCodeAt(wn)?(s=Jt,wn++):(s=u,0===Rn&&In($t))),(n=s!==u?e.substring(n,wn):s)!==u&&(s=fu())!==u&&(a=ru())!==u?(Tn=t,t=r=Gt(r,n,a)):(wn=t,t=u)):(wn=t,t=u),t===u&&(t=nu()),kn[o]={nextPos:wn,result:t},t)}function nu(){var t,r,n,s,a,o=38*wn+18,i=kn[o];return i?(wn=i.nextPos,i.result):(t=wn,(r=uu())!==u&&fu()!==u?(n=wn,e.substr(wn,2)===Ht?(s=Ht,wn+=2):(s=u,0===Rn&&In(Kt)),s===u&&(42===e.charCodeAt(wn)?(s=W,wn++):(s=u,0===Rn&&In(X)),s===u&&(47===e.charCodeAt(wn)?(s=g,wn++):(s=u,0===Rn&&In(v)),s===u&&(37===e.charCodeAt(wn)?(s=Wt,wn++):(s=u,0===Rn&&In(Xt))))),(n=s!==u?e.substring(n,wn):s)!==u&&(s=fu())!==u&&(a=nu())!==u?(Tn=t,t=r=Gt(r,n,a)):(wn=t,t=u)):(wn=t,t=u),t===u&&(t=uu()),kn[o]={nextPos:wn,result:t},t)}function uu(){var t,r,n,s=38*wn+19,a=kn[s];return a?(wn=a.nextPos,a.result):(t=wn,r=wn,33===e.charCodeAt(wn)?(n=h,wn++):(n=u,0===Rn&&In(A)),n===u&&(126===e.charCodeAt(wn)?(n=Yt,wn++):(n=u,0===Rn&&In(te))),(r=n!==u?e.substring(r,wn):n)!==u&&(n=su())!==u?(Tn=t,t=r=ee(r,n)):(wn=t,t=u),t===u&&(t=su()),kn[s]={nextPos:wn,result:t},t)}function su(){var t,r=38*wn+20,n=kn[r];return n?(wn=n.nextPos,n.result):((t=function(){var t,r,n,s,a,o=38*wn+21,l=kn[o];return l?(wn=l.nextPos,l.result):(t=wn,(r=au())!==u&&fu()!==u?(40===e.charCodeAt(wn)?(n=re,wn++):(n=u,0===Rn&&In(ne)),n!==u&&fu()!==u?((s=function(){var t,r,n,s,a,o,l,f,h=38*wn+22,A=kn[h];if(A)return wn=A.nextPos,A.result;if(t=wn,(r=Gn())!==u){for(n=[],s=wn,(a=fu())!==u?(44===e.charCodeAt(wn)?(o=i,wn++):(o=u,0===Rn&&In(c)),o!==u&&(l=fu())!==u&&(f=Gn())!==u?s=a=[a,o,l,f]:(wn=s,s=u)):(wn=s,s=u);s!==u;)n.push(s),s=wn,(a=fu())!==u?(44===e.charCodeAt(wn)?(o=i,wn++):(o=u,0===Rn&&In(c)),o!==u&&(l=fu())!==u&&(f=Gn())!==u?s=a=[a,o,l,f]:(wn=s,s=u)):(wn=s,s=u);n!==u?(Tn=t,r=oe(r,n),t=r):(wn=t,t=u)}else wn=t,t=u;return kn[h]={nextPos:wn,result:t},t}())===u&&(s=null),s!==u&&fu()!==u?(41===e.charCodeAt(wn)?(a=ue,wn++):(a=u,0===Rn&&In(se)),a!==u?(Tn=t,r=ae(r,s),t=r):(wn=t,t=u)):(wn=t,t=u)):(wn=t,t=u)):(wn=t,t=u),kn[o]={nextPos:wn,result:t},t)}())===u&&(t=function(){var t,r,n,s=38*wn+23,a=kn[s];return a?(wn=a.nextPos,a.result):(Rn++,t=wn,64===e.charCodeAt(wn)?(r=ce,wn++):(r=u,0===Rn&&In(le)),r!==u&&(n=au())!==u?(Tn=t,r=fe(n),t=r):(wn=t,t=u),t===u&&(t=wn,64===e.charCodeAt(wn)?(r=ce,wn++):(r=u,0===Rn&&In(le)),r!==u&&(n=ou())!==u?(Tn=t,r=he(n),t=r):(wn=t,t=u)),Rn--,t===u&&(r=u,0===Rn&&In(ie)),kn[s]={nextPos:wn,result:t},t)}())===u&&(t=function(){var t,r,n,s,a=38*wn+24,o=kn[a];return o?(wn=o.nextPos,o.result):(Rn++,t=wn,123===e.charCodeAt(wn)?(r=pe,wn++):(r=u,0===Rn&&In(de)),r!==u&&fu()!==u&&(n=au())!==u&&fu()!==u?(125===e.charCodeAt(wn)?(s=xe,wn++):(s=u,0===Rn&&In(be)),s!==u?(Tn=t,r=ge(n),t=r):(wn=t,t=u)):(wn=t,t=u),Rn--,t===u&&(r=u,0===Rn&&In(Ae)),kn[a]={nextPos:wn,result:t},t)}())===u&&(t=function(){var t,r=38*wn+25,n=kn[r];return n?(wn=n.nextPos,n.result):((t=ou())===u&&(t=function(){var t,r,n,s,a,o=38*wn+31,i=kn[o];if(i)return wn=i.nextPos,i.result;if(Rn++,t=wn,96===e.charCodeAt(wn)?(r=Cr,wn++):(r=u,0===Rn&&In(mr)),r!==u){for(n=wn,s=[],e.substr(wn,2)===Sr?(a=Sr,wn+=2):(a=u,0===Rn&&In(_r)),a===u&&(qr.test(e.charAt(wn))?(a=e.charAt(wn),wn++):(a=u,0===Rn&&In(wr)));a!==u;)s.push(a),e.substr(wn,2)===Sr?(a=Sr,wn+=2):(a=u,0===Rn&&In(_r)),a===u&&(qr.test(e.charAt(wn))?(a=e.charAt(wn),wn++):(a=u,0===Rn&&In(wr)));(n=s!==u?e.substring(n,wn):s)!==u?(96===e.charCodeAt(wn)?(s=Cr,wn++):(s=u,0===Rn&&In(mr)),s!==u?(Tn=t,r=Tr(n),t=r):(wn=t,t=u)):(wn=t,t=u)}else wn=t,t=u;return Rn--,t===u&&(r=u,0===Rn&&In(yr)),kn[o]={nextPos:wn,result:t},t}())===u&&(t=function(){var t,r,n,s,a,o,i,c,l,f,h,A,p=38*wn+32,d=kn[p];if(d)return wn=d.nextPos,d.result;if(Rn++,t=wn,r=wn,Nr.test(e.charAt(wn))?(n=e.charAt(wn),wn++):(n=u,0===Rn&&In(Er)),n===u&&(n=null),(r=n!==u?e.substring(r,wn):n)!==u)if(e.substr(wn,2)===Rr?(n=Rr,wn+=2):(n=u,0===Rn&&In(kr)),n!==u){if(s=wn,a=[],Fr.test(e.charAt(wn))?(o=e.charAt(wn),wn++):(o=u,0===Rn&&In(Lr)),o!==u)for(;o!==u;)a.push(o),Fr.test(e.charAt(wn))?(o=e.charAt(wn),wn++):(o=u,0===Rn&&In(Lr));else a=u;(s=a!==u?e.substring(s,wn):a)!==u?(Tn=t,r=Dr(r,s),t=r):(wn=t,t=u)}else wn=t,t=u;else wn=t,t=u;if(t===u){if(t=wn,r=wn,Nr.test(e.charAt(wn))?(n=e.charAt(wn),wn++):(n=u,0===Rn&&In(Er)),n===u&&(n=null),(r=n!==u?e.substring(r,wn):n)!==u)if(e.substr(wn,2)===jr?(n=jr,wn+=2):(n=u,0===Rn&&In(Mr)),n!==u){if(s=wn,a=[],zr.test(e.charAt(wn))?(o=e.charAt(wn),wn++):(o=u,0===Rn&&In(Ir)),o!==u)for(;o!==u;)a.push(o),zr.test(e.charAt(wn))?(o=e.charAt(wn),wn++):(o=u,0===Rn&&In(Ir));else a=u;(s=a!==u?e.substring(s,wn):a)!==u?(Tn=t,r=Or(r,s),t=r):(wn=t,t=u)}else wn=t,t=u;else wn=t,t=u;if(t===u){if(t=wn,r=wn,Nr.test(e.charAt(wn))?(n=e.charAt(wn),wn++):(n=u,0===Rn&&In(Er)),n===u&&(n=null),(r=n!==u?e.substring(r,wn):n)!==u)if(e.substr(wn,2)===Ur?(n=Ur,wn+=2):(n=u,0===Rn&&In(Vr)),n!==u){if(s=wn,a=[],hr.test(e.charAt(wn))?(o=e.charAt(wn),wn++):(o=u,0===Rn&&In(Ar)),o!==u)for(;o!==u;)a.push(o),hr.test(e.charAt(wn))?(o=e.charAt(wn),wn++):(o=u,0===Rn&&In(Ar));else a=u;(s=a!==u?e.substring(s,wn):a)!==u?(Tn=t,r=Zr(r,s),t=r):(wn=t,t=u)}else wn=t,t=u;else wn=t,t=u;if(t===u){if(t=wn,r=wn,n=wn,Nr.test(e.charAt(wn))?(s=e.charAt(wn),wn++):(s=u,0===Rn&&In(Er)),s===u&&(s=null),s!==u){for(a=[],Br.test(e.charAt(wn))?(o=e.charAt(wn),wn++):(o=u,0===Rn&&In(Jr));o!==u;)a.push(o),Br.test(e.charAt(wn))?(o=e.charAt(wn),wn++):(o=u,0===Rn&&In(Jr));if(a!==u)if(46===e.charCodeAt(wn)?(o=$r,wn++):(o=u,0===Rn&&In(Gr)),o!==u){if(i=[],Br.test(e.charAt(wn))?(c=e.charAt(wn),wn++):(c=u,0===Rn&&In(Jr)),c!==u)for(;c!==u;)i.push(c),Br.test(e.charAt(wn))?(c=e.charAt(wn),wn++):(c=u,0===Rn&&In(Jr));else i=u;if(i!==u){if(c=wn,Hr.test(e.charAt(wn))?(l=e.charAt(wn),wn++):(l=u,0===Rn&&In(Kr)),l!==u)if(Nr.test(e.charAt(wn))?(f=e.charAt(wn),wn++):(f=u,0===Rn&&In(Er)),f===u&&(f=null),f!==u){if(h=[],Br.test(e.charAt(wn))?(A=e.charAt(wn),wn++):(A=u,0===Rn&&In(Jr)),A!==u)for(;A!==u;)h.push(A),Br.test(e.charAt(wn))?(A=e.charAt(wn),wn++):(A=u,0===Rn&&In(Jr));else h=u;h!==u?c=l=[l,f,h]:(wn=c,c=u)}else wn=c,c=u;else wn=c,c=u;c===u&&(c=null),c!==u?n=s=[s,a,o,i,c]:(wn=n,n=u)}else wn=n,n=u}else wn=n,n=u;else wn=n,n=u}else wn=n,n=u;if((r=n!==u?e.substring(r,wn):n)!==u&&(Tn=t,r=Wr(r)),(t=r)===u){if(t=wn,r=wn,n=wn,Nr.test(e.charAt(wn))?(s=e.charAt(wn),wn++):(s=u,0===Rn&&In(Er)),s===u&&(s=null),s!==u){if(a=[],Br.test(e.charAt(wn))?(o=e.charAt(wn),wn++):(o=u,0===Rn&&In(Jr)),o!==u)for(;o!==u;)a.push(o),Br.test(e.charAt(wn))?(o=e.charAt(wn),wn++):(o=u,0===Rn&&In(Jr));else a=u;a!==u?n=s=[s,a]:(wn=n,n=u)}else wn=n,n=u;(r=n!==u?e.substring(r,wn):n)!==u&&(Tn=t,r=Xr(r)),t=r}}}}return Rn--,t===u&&(r=u,0===Rn&&In(Qr)),kn[p]={nextPos:wn,result:t},t}())===u&&(t=lu()),kn[r]={nextPos:wn,result:t},t)}())===u&&(t=function(){var t,r,n,s,a=38*wn+26,o=kn[a];return o?(wn=o.nextPos,o.result):(t=wn,40===e.charCodeAt(wn)?(r=re,wn++):(r=u,0===Rn&&In(ne)),r!==u&&fu()!==u&&(n=Gn())!==u&&fu()!==u?(41===e.charCodeAt(wn)?(s=ue,wn++):(s=u,0===Rn&&In(se)),s!==u?(Tn=t,r=ve(n),t=r):(wn=t,t=u)):(wn=t,t=u),kn[a]={nextPos:wn,result:t},t)}())===u&&(t=Vn()),kn[r]={nextPos:wn,result:t},t)}function au(){var t,r,n,s,a,o,i,c=38*wn+27,l=kn[c];if(l)return wn=l.nextPos,l.result;if(Rn++,t=wn,r=wn,n=wn,s=wn,Rn++,a=lu(),Rn--,a===u?s=void 0:(wn=s,s=u),s!==u)if(ye.test(e.charAt(wn))?(a=e.charAt(wn),wn++):(a=u,0===Rn&&In(Ce)),a!==u){for(o=[],me.test(e.charAt(wn))?(i=e.charAt(wn),wn++):(i=u,0===Rn&&In(Se));i!==u;)o.push(i),me.test(e.charAt(wn))?(i=e.charAt(wn),wn++):(i=u,0===Rn&&In(Se));o!==u?n=s=[s,a,o]:(wn=n,n=u)}else wn=n,n=u;else wn=n,n=u;return(r=n!==u?e.substring(r,wn):n)!==u&&(Tn=t,r=_e(r)),Rn--,(t=r)===u&&(r=u,0===Rn&&In(Pe)),kn[c]={nextPos:wn,result:t},t}function ou(){var t,r,n,s,a=38*wn+28,o=kn[a];if(o)return wn=o.nextPos,o.result;if(Rn++,t=wn,34===e.charCodeAt(wn)?(r=we,wn++):(r=u,0===Rn&&In(Te)),r!==u){for(n=[],(s=iu())===u&&(Qe.test(e.charAt(wn))?(s=e.charAt(wn),wn++):(s=u,0===Rn&&In(Ne)));s!==u;)n.push(s),(s=iu())===u&&(Qe.test(e.charAt(wn))?(s=e.charAt(wn),wn++):(s=u,0===Rn&&In(Ne)));n!==u?(34===e.charCodeAt(wn)?(s=we,wn++):(s=u,0===Rn&&In(Te)),s!==u?(Tn=t,t=r=Ee(n)):(wn=t,t=u)):(wn=t,t=u)}else wn=t,t=u;if(t===u)if(t=wn,39===e.charCodeAt(wn)?(r=Re,wn++):(r=u,0===Rn&&In(ke)),r!==u){for(n=[],(s=cu())===u&&(Fe.test(e.charAt(wn))?(s=e.charAt(wn),wn++):(s=u,0===Rn&&In(Le)));s!==u;)n.push(s),(s=cu())===u&&(Fe.test(e.charAt(wn))?(s=e.charAt(wn),wn++):(s=u,0===Rn&&In(Le)));n!==u?(39===e.charCodeAt(wn)?(s=Re,wn++):(s=u,0===Rn&&In(ke)),s!==u?(Tn=t,t=r=Ee(n)):(wn=t,t=u)):(wn=t,t=u)}else wn=t,t=u;return Rn--,t===u&&(r=u,0===Rn&&In(qe)),kn[a]={nextPos:wn,result:t},t}function iu(){var t,r,n,s,a,o,i,c,l=38*wn+29,f=kn[l];return f?(wn=f.nextPos,f.result):(Rn++,t=wn,e.substr(wn,2)===je?(r=je,wn+=2):(r=u,0===Rn&&In(Me)),r!==u&&(Tn=t,r=ze()),(t=r)===u&&(t=wn,e.substr(wn,2)===Ie?(r=Ie,wn+=2):(r=u,0===Rn&&In(Oe)),r!==u&&(Tn=t,r=Ue()),(t=r)===u&&(t=wn,e.substr(wn,2)===Ve?(r=Ve,wn+=2):(r=u,0===Rn&&In(Ze)),r!==u&&(Tn=t,r=Be()),(t=r)===u&&(t=wn,e.substr(wn,2)===Je?(r=Je,wn+=2):(r=u,0===Rn&&In($e)),r!==u&&(Tn=t,r=Ge()),(t=r)===u&&(t=wn,e.substr(wn,2)===He?(r=He,wn+=2):(r=u,0===Rn&&In(Ke)),r!==u&&(Tn=t,r=We()),(t=r)===u&&(t=wn,e.substr(wn,2)===Xe?(r=Xe,wn+=2):(r=u,0===Rn&&In(Ye)),r!==u&&(Tn=t,r=tr()),(t=r)===u&&(t=wn,e.substr(wn,2)===er?(r=er,wn+=2):(r=u,0===Rn&&In(rr)),r!==u&&(Tn=t,r=nr()),(t=r)===u&&(t=wn,e.substr(wn,2)===ur?(r=ur,wn+=2):(r=u,0===Rn&&In(sr)),r!==u&&(Tn=t,r=ar()),(t=r)===u&&(t=wn,e.substr(wn,2)===or?(r=or,wn+=2):(r=u,0===Rn&&In(ir)),r!==u&&(Tn=t,r=cr()),(t=r)===u&&(t=wn,e.substr(wn,2)===lr?(r=lr,wn+=2):(r=u,0===Rn&&In(fr)),r!==u?(n=wn,s=wn,hr.test(e.charAt(wn))?(a=e.charAt(wn),wn++):(a=u,0===Rn&&In(Ar)),a!==u?(hr.test(e.charAt(wn))?(o=e.charAt(wn),wn++):(o=u,0===Rn&&In(Ar)),o!==u?s=a=[a,o]:(wn=s,s=u)):(wn=s,s=u),(n=s!==u?e.substring(n,wn):s)!==u?(Tn=t,t=r=pr(n)):(wn=t,t=u)):(wn=t,t=u),t===u&&(t=wn,e.substr(wn,2)===dr?(r=dr,wn+=2):(r=u,0===Rn&&In(xr)),r!==u?(n=wn,s=wn,hr.test(e.charAt(wn))?(a=e.charAt(wn),wn++):(a=u,0===Rn&&In(Ar)),a!==u?(hr.test(e.charAt(wn))?(o=e.charAt(wn),wn++):(o=u,0===Rn&&In(Ar)),o!==u?(hr.test(e.charAt(wn))?(i=e.charAt(wn),wn++):(i=u,0===Rn&&In(Ar)),i!==u?(hr.test(e.charAt(wn))?(c=e.charAt(wn),wn++):(c=u,0===Rn&&In(Ar)),c!==u?s=a=[a,o,i,c]:(wn=s,s=u)):(wn=s,s=u)):(wn=s,s=u)):(wn=s,s=u),(n=s!==u?e.substring(n,wn):s)!==u?(Tn=t,t=r=pr(n)):(wn=t,t=u)):(wn=t,t=u))))))))))),Rn--,t===u&&(r=u,0===Rn&&In(De)),kn[l]={nextPos:wn,result:t},t)}function cu(){var t,r,n=38*wn+30,s=kn[n];return s?(wn=s.nextPos,s.result):(Rn++,t=wn,e.substr(wn,2)===gr?(r=gr,wn+=2):(r=u,0===Rn&&In(vr)),r!==u&&(Tn=t,r=Pr()),Rn--,(t=r)===u&&(r=u,0===Rn&&In(br)),kn[n]={nextPos:wn,result:t},t)}function lu(){var t,r,n=38*wn+33,s=kn[n];return s?(wn=s.nextPos,s.result):(Rn++,t=wn,e.substr(wn,4)===tn?(r=tn,wn+=4):(r=u,0===Rn&&In(en)),r!==u&&(Tn=t,r=rn()),(t=r)===u&&(t=wn,e.substr(wn,5)===nn?(r=nn,wn+=5):(r=u,0===Rn&&In(un)),r!==u&&(Tn=t,r=sn()),(t=r)===u&&(t=wn,e.substr(wn,4)===an?(r=an,wn+=4):(r=u,0===Rn&&In(on)),r!==u&&(Tn=t,r=cn()),(t=r)===u&&(t=wn,e.substr(wn,3)===ln?(r=ln,wn+=3):(r=u,0===Rn&&In(fn)),r!==u&&(Tn=t,r=hn()),(t=r)===u&&(t=wn,e.substr(wn,9)===An?(r=An,wn+=9):(r=u,0===Rn&&In(pn)),r!==u&&(Tn=t,r=dn()),t=r)))),Rn--,t===u&&(r=u,0===Rn&&In(Yr)),kn[n]={nextPos:wn,result:t},t)}function fu(){var t,e,r=38*wn+34,n=kn[r];if(n)return wn=n.nextPos,n.result;for(Rn++,t=[],(e=hu())===u&&(e=Au());e!==u;)t.push(e),(e=hu())===u&&(e=Au());return Rn--,t===u&&(e=u,0===Rn&&In(xn)),kn[r]={nextPos:wn,result:t},t}function hu(){var t,r,n,s,a,o,i=38*wn+35,c=kn[i];if(c)return wn=c.nextPos,c.result;if(Rn++,t=wn,e.substr(wn,2)===gn?(r=gn,wn+=2):(r=u,0===Rn&&In(vn)),r!==u){for(n=[],s=wn,a=wn,Rn++,e.substr(wn,2)===Pn?(o=Pn,wn+=2):(o=u,0===Rn&&In(yn)),Rn--,o===u?a=void 0:(wn=a,a=u),a!==u?(e.length>wn?(o=e.charAt(wn),wn++):(o=u,0===Rn&&In(Cn)),o!==u?s=a=[a,o]:(wn=s,s=u)):(wn=s,s=u);s!==u;)n.push(s),s=wn,a=wn,Rn++,e.substr(wn,2)===Pn?(o=Pn,wn+=2):(o=u,0===Rn&&In(yn)),Rn--,o===u?a=void 0:(wn=a,a=u),a!==u?(e.length>wn?(o=e.charAt(wn),wn++):(o=u,0===Rn&&In(Cn)),o!==u?s=a=[a,o]:(wn=s,s=u)):(wn=s,s=u);n!==u?(e.substr(wn,2)===Pn?(s=Pn,wn+=2):(s=u,0===Rn&&In(yn)),s!==u?t=r=[r,n,s]:(wn=t,t=u)):(wn=t,t=u)}else wn=t,t=u;return Rn--,t===u&&(r=u,0===Rn&&In(bn)),kn[i]={nextPos:wn,result:t},t}function Au(){var t,r,n=38*wn+36,s=kn[n];if(s)return wn=s.nextPos,s.result;if(Rn++,t=[],Sn.test(e.charAt(wn))?(r=e.charAt(wn),wn++):(r=u,0===Rn&&In(_n)),r!==u)for(;r!==u;)t.push(r),Sn.test(e.charAt(wn))?(r=e.charAt(wn),wn++):(r=u,0===Rn&&In(_n));else t=u;return Rn--,t===u&&(r=u,0===Rn&&In(mn)),kn[n]={nextPos:wn,result:t},t}var pu=r.util.makeUnroll(Fn,r),du=r.util.makeAST(Fn,r);if((n=a())!==u&&wn===e.length)return n;throw n!==u&&wn<e.length&&In({type:"end"}),On(En,Nn<e.length?e.charAt(Nn):null,Nn<e.length?zn(Nn,Nn+1):zn(Nn,Nn))}}}(),ASTQQuery=function(){function t(e){_classCallCheck(this,t),this.asty=new _asty.default,this.ast=null,this.lastTrace=null,e&&this.compile(e)}return _createClass(t,[{key:"compile",value:function(t,e){var r,n=this;e&&("function"==typeof e?e({event:"startCompile",selector:t,timestamp:r=Date.now()}):console.log("ASTQ: compile: +-------------------------------------------------------------------------------------------------------\nASTQ: compile: | "+t));var u=_pegjsUtil.default.parse(ASTQQueryParse,t,{startRule:"query",makeAST:function(t,e,r,u){return n.asty.create.apply(n.asty,u).pos(t,e,r)}});if(null!==u.error)throw new Error("ASTQ: compile: query parsing failed:\n"+_pegjsUtil.default.errorMessage(u.error,!0).replace(/^/gm,"ERROR: "));if(this.ast=u.ast,e){var s="ASTQ: compile: +-------------------------------------------------------------------------------------------------------\n"+this.dump().replace(/\n$/,"").replace(/^/gm,"ASTQ: compile: | ");if("function"==typeof e){var a=Date.now();e({event:"finishCompile",selector:t,traceMsg:s,queryAst:this.ast&&this.ast.serialize(),totalCompileTime:a-r,timestamp:a})}else console.log(s)}return this}},{key:"dump",value:function(){return this.ast.dump()}},{key:"serialize",value:function(){return this.ast.serialize()}},{key:"toJSONObject",value:function(){return JSON.parse(this.ast.serialize())}},{key:"execute",value:function(t,e,r,n,u){var s;u&&("function"==typeof u&&(s=Date.now(),u({event:"startSearch",node:t,queryNode:this.ast,nodeDepth:0,queryNodeDepth:0,timestamp:s})),console.log("ASTQ: execute: +--------------------------------------------------------------+----------------------------------------"));var a=new _astqQueryExec.default(e,r,n,u).execQuery(this.ast,t);if("function"==typeof u){var o=Date.now();u({event:"finishSearch",node:t,matches:a,queryNode:this.ast,nodeDepth:0,queryNodeDepth:0,timestamp:o,totalSearchTime:o-s,traceMsg:"Search ends"})}return a}}]),t}();exports.default=ASTQQuery;
},{"./astq-query-exec.js":14,"asty":1,"pegjs-util":3}],17:[function(_dereq_,module,exports){
"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var ASTQUtil=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"pad",value:function(e,t){var r=t<0?-t:t;if(e.length>r)e=e.substr(0,r);else{var n=Array(r+1-e.length).join(" ");e=t<0?e+n:n+e}return e}},{key:"truthy",value:function(e){var t;switch(_typeof(e)){case"boolean":t=e;break;case"number":t=0!==e&&!isNaN(e);break;case"string":t=""!==e;break;case"object":t=!1,null!==e&&(t=!0,e instanceof Array&&(t=e.length>0));break;default:t=!1}return t}},{key:"coerce",value:function(e,t){if(_typeof(e)!==t)try{switch(t){case"boolean":"boolean"!=typeof e&&(e=Boolean(e));break;case"number":"number"!=typeof e&&(e=Number(e));break;case"string":"string"!=typeof e&&(e=String(e));break;case"regexp":"object"===_typeof(e)&&e instanceof RegExp||(e=new RegExp(e))}}catch(e){throw new Error("cannot coerce value into type "+t)}return e}}]),e}();exports.default=ASTQUtil;
},{}],18:[function(_dereq_,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var version={major:2,minor:6,micro:2,date:20190519},_default=version;exports.default=_default;
},{}],19:[function(_dereq_,module,exports){
"use strict";var _cacheLru=_interopRequireDefault(_dereq_("cache-lru")),_astqAdapter=_interopRequireDefault(_dereq_("./astq-adapter.js")),_astqAdapterXmldom=_interopRequireDefault(_dereq_("./astq-adapter-xmldom.js")),_astqAdapterParse=_interopRequireDefault(_dereq_("./astq-adapter-parse5.js")),_astqAdapterMozast=_interopRequireDefault(_dereq_("./astq-adapter-mozast.js")),_astqAdapterGraphql=_interopRequireDefault(_dereq_("./astq-adapter-graphql.js")),_astqAdapterJson=_interopRequireDefault(_dereq_("./astq-adapter-json.js")),_astqAdapterCheerio=_interopRequireDefault(_dereq_("./astq-adapter-cheerio.js")),_astqAdapterAsty=_interopRequireDefault(_dereq_("./astq-adapter-asty.js")),_astqFuncs=_interopRequireDefault(_dereq_("./astq-funcs.js")),_astqFuncsStd=_interopRequireDefault(_dereq_("./astq-funcs-std.js")),_astqQuery=_interopRequireDefault(_dereq_("./astq-query.js")),_astqVersion=_interopRequireDefault(_dereq_("./astq-version.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}var ASTQ=function(){function e(){for(var t in _classCallCheck(this,e),this._adapter=(new _astqAdapter.default).register(_astqAdapterXmldom.default,!1).register(_astqAdapterParse.default,!1).register(_astqAdapterMozast.default,!1).register(_astqAdapterGraphql.default,!1).register(_astqAdapterJson.default,!1).register(_astqAdapterCheerio.default,!1).register(_astqAdapterAsty.default,!1),this._funcs=new _astqFuncs.default,_astqFuncsStd.default)this.func(t,_astqFuncsStd.default[t]);this._cache=new _cacheLru.default}return _createClass(e,[{key:"version",value:function(){return _astqVersion.default}},{key:"adapter",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(arguments.length<1||arguments.length>2)throw new Error("ASTQ#adapter: invalid number of arguments");if(this._adapter.unregister(),"object"===_typeof(e)&&e instanceof Array||(e=[e]),e.length>1&&r)throw new Error("ASTQ#adapter: you can force just a single adapter to not taste the AST node");return e.forEach(function(e){if("string"==typeof e)if("mozast"===e)e=_astqAdapterMozast.default;else if("graphql"===e)e=_astqAdapterGraphql.default;else if("xmldom"===e)e=_astqAdapterXmldom.default;else if("parse5"===e)e=_astqAdapterParse.default;else if("json"===e)e=_astqAdapterJson.default;else if("cheerio"===e)e=_astqAdapterCheerio.default;else{if("asty"!==e)throw new Error("ASTQ#adapter: unknown built-in adapter");e=_astqAdapterAsty.default}t._adapter.register(e,r)}),this}},{key:"func",value:function(e,t){if(2!==arguments.length)throw new Error("ASTQ#func: invalid number of arguments");return this._funcs.register(e,t),this}},{key:"cache",value:function(e){if(1!==arguments.length)throw new Error("ASTQ#cache: invalid number of arguments");return this._cache.limit(e),this}},{key:"compile",value:function(e,t){if(arguments.length<1)throw new Error("ASTQ#compile: too less arguments");if(arguments.length>2)throw new Error("ASTQ#compile: too many arguments");void 0===t&&(t=!1);var r=this._cache.get(e);return void 0===r&&((r=new _astqQuery.default).compile(e,t),this._cache.set(e,r)),r}},{key:"execute",value:function(e,t,r,a){if(arguments.length<2)throw new Error("ASTQ#execute: too less arguments");if(arguments.length>4)throw new Error("ASTQ#execute: too many arguments");void 0===r&&(r={}),void 0===a&&(a=!1);var s=this._adapter.select(e);if(void 0===s)throw new Error("ASTQ#execute: no suitable adapter found for node");return t.execute(e,s,r,this._funcs,a)}},{key:"query",value:function(e,t,r,a){if(arguments.length<2)throw new Error("ASTQ#query: too less arguments");if(arguments.length>4)throw new Error("ASTQ#query: too many arguments");return void 0===r&&(r={}),void 0===a&&(a=!1),this.execute(e,this.compile(t,a),r,a)}}]),e}();module.exports=ASTQ;
},{"./astq-adapter-asty.js":4,"./astq-adapter-cheerio.js":5,"./astq-adapter-graphql.js":6,"./astq-adapter-json.js":7,"./astq-adapter-mozast.js":8,"./astq-adapter-parse5.js":9,"./astq-adapter-xmldom.js":10,"./astq-adapter.js":11,"./astq-funcs-std.js":12,"./astq-funcs.js":13,"./astq-query.js":16,"./astq-version.js":18,"cache-lru":2}]},{},[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19])(19)
});
