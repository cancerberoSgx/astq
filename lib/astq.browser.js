/*
**  ASTq -- Abstract Syntax Tree (AST) Query Engine
**  Copyright (c) 2014-2019 Dr. Ralf S. Engelschall <rse@engelschall.com>
**
**  Permission is hereby granted, free of charge, to any person obtaining
**  a copy of this software and associated documentation files (the
**  "Software"), to deal in the Software without restriction, including
**  without limitation the rights to use, copy, modify, merge, publish,
**  distribute, sublicense, and/or sell copies of the Software, and to
**  permit persons to whom the Software is furnished to do so, subject to
**  the following conditions:
**
**  The above copyright notice and this permission notice shall be included
**  in all copies or substantial portions of the Software.
**
**  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
**  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
**  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
**  IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
**  CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
**  TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
**  SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
*/

(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.ASTQ = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(_dereq_,module,exports){
(function (global){
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).ASTY=e()}}(function(){return function(){return function e(n,t,r){function o(a,u){if(!t[a]){if(!n[a]){var f="function"==typeof _dereq_&&_dereq_;if(!u&&f)return f(a,!0);if(i)return i(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=t[a]={exports:{}};n[a][0].call(c.exports,function(e){return o(n[a][1][e]||e)},c,c.exports,e,n,t,r)}return t[a].exports}for(var i="function"==typeof _dereq_&&_dereq_,a=0;a<r.length;a++)o(r[a]);return o}}()({1:[function(e,n,t){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,n,t){n&&o(e.prototype,n),t&&o(e,t)}(e,[{key:"init",value:function(e,n,t,o){if(arguments.length<2)throw new Error("init: invalid number of arguments");if(this.ctx=e,this.ASTy=!0,this.T=n,this.L={L:0,C:0,O:0},this.A={},this.C=[],this.P=null,"object"===r(t))for(var i in t)t.hasOwnProperty(i)&&this.set(i,t[i]);return"object"===r(o)&&o instanceof Array&&this.add(o),this}},{key:"create",value:function(e,n,t){return this.ctx.create(e,n,t)}},{key:"type",value:function(e){if(0===arguments.length)return this.T;if(1===arguments.length)return this.T=e,this;throw new Error("type: invalid number of arguments")}},{key:"pos",value:function(e,n,t){if(0===arguments.length)return{line:this.L.L,column:this.L.C,offset:this.L.O};if(arguments.length<=3)return this.L.L=e||0,this.L.C=n||0,this.L.O=t||0,this;throw new Error("pos: invalid number of arguments")}},{key:"set",value:function(){for(var e=this,n=arguments.length,t=new Array(n),o=0;o<n;o++)t[o]=arguments[o];if(1===t.length&&"object"===r(t[0]))Object.keys(t[0]).forEach(function(n){void 0!==t[0][n]?e.A[n]=t[0][n]:delete e.A[n]});else{if(2!==t.length)throw new Error("set: invalid number of arguments");void 0!==t[1]?this.A[t[0]]=t[1]:delete this.A[t[0]]}return this}},{key:"unset",value:function(){for(var e=this,n=arguments.length,t=new Array(n),o=0;o<n;o++)t[o]=arguments[o];if(1===t.length&&"object"===r(t[0])&&t[0]instanceof Array)t[0].forEach(function(n){delete e.A[n]});else{if(1!==t.length)throw new Error("unset: invalid number of arguments");delete this.A[t[0]]}return this}},{key:"get",value:function(){for(var e=this,n=arguments.length,t=new Array(n),o=0;o<n;o++)t[o]=arguments[o];if(1!==t.length)throw new Error("get: invalid number of arguments");if("object"===r(t[0])&&t[0]instanceof Array)return t[0].map(function(n){if("string"!=typeof n)throw new Error("get: invalid key argument");return e.A[n]});var i=t[0];if("string"!=typeof i)throw new Error("get: invalid key argument");return this.A[i]}},{key:"attrs",value:function(){return Object.keys(this.A)}},{key:"nth",value:function(){if(null===this.P)return 1;var e=this.P.C.indexOf(this);if(e<0)throw new Error("nth: internal error -- node not in childs of its parent");return e}},{key:"ins",value:function(e){for(var n=this,t=arguments.length,o=new Array(t>1?t-1:0),i=1;i<t;i++)o[i-1]=arguments[i];if(0===o.length)throw new Error("ins: invalid number of arguments");if(e<0&&(e=this.C.length+1-e),!(e>=0&&e<=this.C.length))throw new Error("ins: invalid position");var a=function(t){if(!n.ctx.isA(t))throw new Error("ins: invalid AST node argument");n.C.splice(e++,0,t),t.P=n};return o.forEach(function(e){"object"===r(e)&&e instanceof Array?e.forEach(function(e){a(e)}):null!==e&&a(e)}),this}},{key:"add",value:function(){for(var e=this,n=arguments.length,t=new Array(n),o=0;o<n;o++)t[o]=arguments[o];if(0===t.length)throw new Error("add: invalid number of arguments");var i=function(n){if(!e.ctx.isA(n))throw new Error("add: invalid AST node argument");e.C.push(n),n.P=e};return t.forEach(function(e){"object"===r(e)&&e instanceof Array?e.forEach(function(e){i(e)}):null!==e&&i(e)}),this}},{key:"del",value:function(){for(var e=this,n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];if(0===t.length)throw new Error("del: invalid number of arguments");return t.forEach(function(n){if(!e.ctx.isA(n))throw new Error("del: invalid AST node argument");for(var t=!1,r=0;r<e.C.length;r++)if(e.C[r]===n){e.C.splice(r,1),n.P=null,t=!0;break}if(!t)throw new Error("del: AST node not found in childs")}),this}},{key:"childs",value:function(){if(arguments.length>2)throw new Error("childs: invalid number of arguments");if(2===arguments.length&&"number"==typeof(arguments.length<=0?void 0:arguments[0])&&"number"==typeof(arguments.length<=1?void 0:arguments[1]))return this.C.slice(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1]);if(1===arguments.length&&"number"==typeof(arguments.length<=0?void 0:arguments[0]))return this.C.slice(arguments.length<=0?void 0:arguments[0]);if(0===arguments.length)return this.C;throw new Error("childs: invalid type of arguments")}},{key:"child",value:function(e){if("number"!=typeof e)throw new Error("child: invalid argument");return e<this.C.length?this.C[e]:null}},{key:"parent",value:function(){return this.P}},{key:"serialize",value:function(){return this.ctx.__serialize(this)}}]),e}();t.default=i},{}],2:[function(e,n,t){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={mid:{unicode:String.fromCharCode(9500),ascii:"+"},last:{unicode:String.fromCharCode(9492),ascii:"+"},down:{unicode:String.fromCharCode(9474),ascii:"|"},left:{unicode:String.fromCharCode(9472),ascii:"-"}},a=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,n,t){n&&o(e.prototype,n),t&&o(e,t)}(e,[{key:"dump",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,n){return n},t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o="",a=this;return this.walk(function(u,f){if(!(f>e)){if(f>0){var l=function(e){var n=0,t=0;return null!==e.P&&(n=e.P.C.indexOf(e),t=e.P.C.length-1),{nth:n,max:t}},c=l(u),s=c.nth,h=c.max,d=" ";d=t?"".concat(i.left.unicode).concat(i.left.unicode).concat(d):"".concat(i.left.ascii).concat(i.left.ascii).concat(d),d=s<h?"".concat(t?i.mid.unicode:i.mid.ascii).concat(d):"".concat(t?i.last.unicode:i.last.ascii).concat(d);for(var y=u.P;null!==y&&y!==a;y=y.P)if(null!==y.P){var v=l(y);d=v.nth<v.max?"".concat(t?i.down.unicode:i.down.ascii,"   ").concat(d):"    ".concat(d)}o+=n("tree",d)}o+=n("type",u.T)+" ";var p=Object.keys(u.A);if(p.length>0){o+=n("parenthesis","(");var b=!0;p.forEach(function(e){b?b=!1:o+=n("comma",",")+" ",o+=n("key",e)+n("colon",":")+" ";var t=u.A[e];switch(r(t)){case"boolean":case"number":o+=n("value",t.toString());break;case"string":var i=function(e){return e.charCodeAt(0).toString(16).toUpperCase()};o+=n("value",'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(e){return"\\x0"+i(e)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(e){return"\\x"+i(e)}).replace(/[\u0100-\u0FFF]/g,function(e){return"\\u0"+i(e)}).replace(/[\u1000-\uFFFF]/g,function(e){return"\\u"+i(e)})+'"');break;case"object":t instanceof RegExp?o+=n("value","/"+t.source+"/"):o+=n("value",JSON.stringify(t));break;default:o+=n("value",JSON.stringify(t))}}),o+=n("parenthesis",")")+" "}o+=n("position",n("bracket","[")+n("line",u.L.L)+n("slash",",")+n("column",u.L.C)+n("bracket","]")),o+="\n"}},"downward"),o}}]),e}();t.default=a},{}],3:[function(e,n,t){"use strict";function r(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,n,t){n&&r(e.prototype,n),t&&r(e,t)}(e,[{key:"merge",value:function(e){var n=this,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null===e)return this;if(!this.ctx.isA(e))throw new Error("merge: invalid AST node argument");if(t){var o=e.pos();this.pos(o.line,o.column,o.offset)}e.attrs().forEach(function(t){var o=void 0!==r[t]?r[t]:t;null!==o&&n.set(o,e.get(t))}),e.childs().forEach(function(t){e.del(t),n.add(t)});var i=e.parent();return null!==i&&i.del(e),this}}]),e}();t.default=o},{}],4:[function(e,n,t){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,n,t){n&&o(e.prototype,n),t&&o(e,t)}(e,null,[{key:"serialize",value:function(e,n){if(!e.isA(n))throw new Error("serialize: not an ASTy node");return JSON.stringify({ASTy:function e(n){var t={T:n.T,L:{L:n.L.L,C:n.L.C,O:n.L.O}},o=Object.keys(n.A);return o.length>0&&(t.A={},o.forEach(function(e){var o=n.A[e];switch(r(o)){case"boolean":case"number":case"string":t.A[e]=o;break;default:t.A[e]=JSON.parse(JSON.stringify(o))}})),n.C.length>0&&(t.C=n.C.map(function(n){return e(n)})),t}(n)})}},{key:"unserialize",value:function(e,n){var t=JSON.parse(n);if("object"!==r(t)||"object"!==r(t.ASTy))throw new Error("unserialize: not an ASTy JSON export");return function n(t){var o=e.create(t.T);return o.pos(t.L.L,t.L.C,t.L.O),"object"===r(t.A)&&Object.keys(t.A).forEach(function(e){var n=t.A[e];switch(r(n)){case"boolean":case"number":case"string":o.set(e,n);break;default:o.set(e,JSON.parse(JSON.stringify(n)))}}),"object"===r(t.C)&&t.C instanceof Array&&o.add(t.C.map(function(e){return n(e)})),o}(t.ASTy)}}]),e}();t.default=i},{}],5:[function(e,n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={major:1,minor:8,micro:5,date:20190519};t.default=r},{}],6:[function(e,n,t){"use strict";function r(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,n,t){n&&r(e.prototype,n),t&&r(e,t)}(e,[{key:"walk",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"downward";return function t(r,o,i){"downward"!==n&&"both"!==n||e(r,o,i,"downward"),r.C.forEach(function(e){t(e,o+1,r)}),"upward"!==n&&"both"!==n||e(r,o,i,"upward")}(this,0,null),this}}]),e}();t.default=o},{}],7:[function(e,n,t){"use strict";var r=l(e("./asty-base.js")),o=l(e("./asty-merge.js")),i=l(e("./asty-walk.js")),a=l(e("./asty-dump.js")),u=l(e("./asty-serialize.js")),f=l(e("./asty-version.js"));function l(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function h(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var d=function(){function e(){var n=this;return s(this,e),this.ASTYNode=function e(){s(this,e)},[[r.default,"init","create","type","pos","set","unset","get","attrs","nth","ins","add","del","childs","child","parent","serialize"],[o.default,"merge"],[i.default,"walk"],[a.default,"dump"]].forEach(function(e){var t=e[0].prototype;e.slice(1).forEach(function(e){n.ASTYNode.prototype[e]=t[e]})}),this}return function(e,n,t){n&&h(e.prototype,n),t&&h(e,t)}(e,[{key:"version",value:function(){return f.default}},{key:"extend",value:function(e){for(var n in e)e.hasOwnProperty(n)&&(this.ASTYNode.prototype[n]=e[n]);return this}},{key:"create",value:function(e,n,t){return(new this.ASTYNode).init(this,e,n,t)}},{key:"isA",value:function(e){return"object"===c(e)&&e instanceof this.ASTYNode&&"boolean"==typeof e.ASTy&&!0===e.ASTy}},{key:"__serialize",value:function(n){return e.serialize(n)}}],[{key:"serialize",value:function(e){return u.default.serialize(e.ctx,e)}},{key:"unserialize",value:function(e){return u.default.unserialize(new this,e)}}]),e}();n.exports=d},{"./asty-base.js":1,"./asty-dump.js":2,"./asty-merge.js":3,"./asty-serialize.js":4,"./asty-version.js":5,"./asty-walk.js":6}]},{},[1,2,3,4,5,6,7])(7)});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],2:[function(_dereq_,module,exports){
(function (global){
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).CacheLRU=e()}}(function(){return function(){return function e(t,i,n){function r(u,s){if(!i[u]){if(!t[u]){var l="function"==typeof _dereq_&&_dereq_;if(!s&&l)return l(u,!0);if(o)return o(u,!0);var h=new Error("Cannot find module '"+u+"'");throw h.code="MODULE_NOT_FOUND",h}var a=i[u]={exports:{}};t[u][0].call(a.exports,function(e){return r(t[u][1][e]||e)},a,a.exports,e,t,i,n)}return i[u].exports}for(var o="function"==typeof _dereq_&&_dereq_,u=0;u<n.length;u++)r(n[u]);return r}}()({1:[function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._index={},this._LRU={newer:null},this._MRU={older:null},this._LRU.newer=this._MRU,this._MRU.older=this._LRU,this._cur=0,this._max=1/0,this._dispose=function(){},this}return function(e,t,i){t&&n(e.prototype,t),i&&n(e,i)}(e,[{key:"limit",value:function(e){var t=this._max;return arguments.length>0&&(this._max=e,this._purge()),t}},{key:"dispose",value:function(e){return this._dispose=e,this}},{key:"length",value:function(){return this._cur}},{key:"keys",value:function(){return this.each(function(e,t){this.push(t)},[])}},{key:"values",value:function(){return this.each(function(e){this.push(e)},[])}},{key:"each",value:function(e,t){arguments<2&&(t=this);for(var i=0,n=this._MRU.older;n!==this._LRU;)e.call(t,n.val,n.key,i++),n=n.older;return t}},{key:"has",value:function(e){return void 0!==this._index[e]}},{key:"peek",value:function(e){var t=this._index[e];if(void 0!==t){if(!(t.expires<Date.now()))return t.val;this.del(t.key)}}},{key:"touch",value:function(e){var t=this._index[e];if(void 0===t)throw new Error("touch: no such item");return this._promote(t),this}},{key:"get",value:function(e){var t=this._index[e];if(void 0!==t){if(!(t.expires<Date.now()))return this._promote(t),t.val;this.del(t.key)}}},{key:"set",value:function(e,t,i){arguments.length<3&&(i=1/0),i+=Date.now();var n=this._index[e];if(void 0===n)n={older:null,newer:null,key:e,val:t,expires:i},this._index[e]=n,this._attach(n),this._cur++,this._purge();else{var r=n.val;n.val=t,this._promote(n),this._dispose.call(void 0,n.key,r,"set")}return this}},{key:"del",value:function(e){var t=this._index[e];if(void 0===t)throw new Error("del: no such item");return delete this._index[e],this._detach(t),this._cur--,this._dispose.call(void 0,e,t.val,"del"),this}},{key:"clear",value:function(){for(;this._cur>0;)this.del(this._LRU.newer.key);return this}},{key:"_purge",value:function(){for(;this._cur>this._max;)this.del(this._LRU.newer.key)}},{key:"_promote",value:function(e){this._detach(e),this._attach(e)}},{key:"_detach",value:function(e){e.older.newer=e.newer,e.newer.older=e.older,e.older=null,e.newer=null}},{key:"_attach",value:function(e){e.older=this._MRU.older,e.newer=this._MRU,e.newer.older=e,e.older.newer=e}}]),e}();t.exports=r},{}]},{},[1])(1)});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],3:[function(_dereq_,module,exports){
(function (global){
!function(e,n,r){"object"==typeof module&&"object"==typeof module.exports?module.exports=r():"function"==typeof define&&void 0!==define.amd?define("PEGUtil",function(){return r()}):e.PEGUtil=r()}("undefined"!=typeof global?global:"undefined"!=typeof window?window:this,0,function(){var e={makeAST:function(e,n){return function(){return n.util.__makeAST.call(null,e().start.line,e().start.column,e().start.offset,arguments)}},makeUnroll:function(e,n){return function(r,t,o){if("object"!=typeof t||!(t instanceof Array))throw new n.util.__SyntaxError("unroll: invalid list argument for unrolling",typeof t,"Array",e());if(void 0!==o){"number"==typeof o&&(o=[o]);var l=[];null!==r&&l.push(r);for(var a=0;a<t.length;a++)for(var i=0;i<o.length;i++)l.push(t[a][o[i]]);return l}return null!==r&&t.unshift(r),t}}},n=function(e,n){var r=e.length,t=n-20;t<0&&(t=0);var o=n+20;o>r&&(o=r);var l=function(e){return e.charCodeAt(0).toString(16).toUpperCase()},a=function(e,n,r){return e.substr(n,r).replace(/\\/g,"\\\\").replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(e){return"\\x0"+l(e)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(e){return"\\x"+l(e)}).replace(/[\u0100-\u0FFF]/g,function(e){return"\\u0"+l(e)}).replace(/[\u1000-\uFFFF]/g,function(e){return"\\u"+l(e)})};return{prolog:a(e,t,n-t),token:a(e,n,1),epilog:a(e,n+1,o-(n+1))}};return e.parse=function(r,t,o){if("object"!=typeof r)throw new Error("invalid parser object (not an object)");if("function"!=typeof r.parse)throw new Error('invalid parser object (no "parse" function)');if("string"!=typeof t)throw new Error("invalid input text (not a string)");if(void 0!==o&&"object"!=typeof o)throw new Error("invalid options (not an object)");void 0===o&&(o={});var l={ast:null,error:null};try{var a;a="function"==typeof o.makeAST?o.makeAST:function(e,n){return{line:e().start.line,column:e().start.column,offset:e().start.offset,args:n}},o.util={makeUnroll:e.makeUnroll,makeAST:e.makeAST,__makeAST:a,__SyntaxError:r.SyntaxError},l.ast=r.parse(t,o),l.error=null}catch(e){if(l.ast=null,e instanceof r.SyntaxError){var i=function(e,n){return void 0!==e?e:n};l.error={line:i(e.location.start.line,0),column:i(e.location.start.column,0),message:e.message,found:i(e.found,""),expected:i(e.expected,""),location:n(t,i(e.location.start.offset,0))}}else l.error={line:0,column:0,message:e.message,found:"",expected:"",location:n("",0)}}return l},e.errorMessage=function(e,n){for(var r=e.location,t="line "+e.line+" (column "+e.column+"): ",o="",l=0;l<t.length+r.prolog.length;l++)o+="-";return t+r.prolog+r.token+r.epilog+"\n"+o+"^\n"+e.message+(n?"":"\n")},e});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],4:[function(_dereq_,module,exports){
"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var ASTQAdapterASTY=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"taste",value:function(e){return"object"===_typeof(e)&&null!==e&&"boolean"==typeof e.ASTy}},{key:"getParentNode",value:function(e){return e.parent()}},{key:"getChildNodes",value:function(e){return e.childs()}},{key:"getNodeType",value:function(e){return e.type()}},{key:"getNodeAttrNames",value:function(e){return e.attrs()}},{key:"getNodeAttrValue",value:function(e,t){return e.get(t)}}]),e}();exports.default=ASTQAdapterASTY;
},{}],5:[function(_dereq_,module,exports){
"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var ASTQAdapterCheerio=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"taste",value:function(e){return"object"===_typeof(e)&&null!==e&&!("object"===("undefined"==typeof Node?"undefined":_typeof(Node))&&e instanceof Node)&&"string"==typeof e.tagName&&""!==e.tagName}},{key:"getParentNode",value:function(e){return e.parentNode}},{key:"getChildNodes",value:function(e){return"object"===_typeof(e.childNodes)&&e.childNodes instanceof Array?e.childNodes:[]}},{key:"getNodeType",value:function(e){return e.tagName||"#".concat(e.type||"unknown")}},{key:"getNodeAttrNames",value:function(e){var t=["value"];return"object"===_typeof(e.attribs)&&(t=t.concat(Object.keys(e.attribs))),t}},{key:"getNodeAttrValue",value:function(e,t){var o;return"value"===t?o=e.nodeValue:"object"===_typeof(e.attribs)&&(o=e.attribs[t]),o}}]),e}();exports.default=ASTQAdapterCheerio;
},{}],6:[function(_dereq_,module,exports){
"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var ASTQAdapterGraphQL=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"taste",value:function(e){return"object"===_typeof(e)&&null!==e&&"string"==typeof e.kind&&""!==e.kind}},{key:"getParentNode",value:function(e,t){throw new Error("GraphQL AST does not support parent node traversal")}},{key:"getChildNodes",value:function(e,t){var o=this,r=[],n=function(e,t){e.hasOwnProperty(t)&&o.taste(e[t])?r.push(e[t]):e.hasOwnProperty(t)&&"object"===_typeof(e[t])&&e[t]instanceof Array&&e[t].forEach(function(e){o.taste(e)&&r.push(e)})};if("*"===t)for(var a in e)n(e,a);else void 0!==e[t]&&n(e,t);return r}},{key:"getNodeType",value:function(e){return e.kind}},{key:"getNodeAttrNames",value:function(e){var t=[];for(var o in e)e.hasOwnProperty(o)&&"object"!==_typeof(e[o])&&"kind"!==o&&"loc"!==o&&t.push(o);return t}},{key:"getNodeAttrValue",value:function(e,t){return e.hasOwnProperty(t)&&"object"!==_typeof(e[t])&&"kind"!==t&&"loc"!==t?e[t]:void 0}}]),e}();exports.default=ASTQAdapterGraphQL;
},{}],7:[function(_dereq_,module,exports){
"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var ASTQAdapterJSON=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"taste",value:function(e){return"object"===_typeof(e)&&null!==e}},{key:"getParentNode",value:function(e,t){throw new Error("JSON does not support parent node traversal")}},{key:"getChildNodes",value:function(e,t){var o=this,n=[],r=function(e,t){e.hasOwnProperty(t)&&o.taste(e[t])?n.push(e[t]):e.hasOwnProperty(t)&&"object"===_typeof(e[t])&&e[t]instanceof Array&&e[t].forEach(function(e){o.taste(e)&&n.push(e)})};if("*"===t)for(var a in e)r(e,a);else void 0!==e[t]&&r(e,t);return n}},{key:"getNodeType",value:function(e){return null===e?"Null":e instanceof Boolean?"Boolean":e instanceof Number?"Number":e instanceof String?"String":"object"===_typeof(e)?e instanceof Array?"Array":"function"==typeof e.constructor&&"string"==typeof e.constructor.name?e.constructor.name:"Object":"Unknown"}},{key:"getNodeAttrNames",value:function(e){var t=[];for(var o in e)e.hasOwnProperty(o)&&"object"!==_typeof(e[o])&&t.push(o);return t}},{key:"getNodeAttrValue",value:function(e,t){return e.hasOwnProperty(t)&&"object"!==_typeof(e[t])?e[t]:void 0}}]),e}();exports.default=ASTQAdapterJSON;
},{}],8:[function(_dereq_,module,exports){
"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var ASTQAdapterMozAST=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"taste",value:function(e){return"object"===_typeof(e)&&null!==e&&"string"==typeof e.type&&""!==e.type}},{key:"getParentNode",value:function(e,t){if("*"!==t&&"parent"!==t)throw new Error('no such axis named "'+t+'" for walking to parent nodes');if(void 0!==e.parent)return e.parent;throw new Error("Your Mozilla SpiderMonkey AST does not support parent node traversal")}},{key:"getChildNodes",value:function(e,t){var o=this,r=[],n=function(e,t){e.hasOwnProperty(t)&&o.taste(e[t])?r.push(e[t]):e.hasOwnProperty(t)&&"object"===_typeof(e[t])&&e[t]instanceof Array&&e[t].forEach(function(e){o.taste(e)&&r.push(e)})};if("*"===t)for(var a in e)n(e,a);else void 0!==e[t]&&n(e,t);return r}},{key:"getNodeType",value:function(e){return e.type}},{key:"getNodeAttrNames",value:function(e){var t=[];for(var o in e)e.hasOwnProperty(o)&&"object"!==_typeof(e[o])&&"type"!==o&&"loc"!==o&&t.push(o);return t}},{key:"getNodeAttrValue",value:function(e,t){return e.hasOwnProperty(t)&&"object"!==_typeof(e[t])&&"type"!==t&&"loc"!==t?e[t]:void 0}}]),e}();exports.default=ASTQAdapterMozAST;
},{}],9:[function(_dereq_,module,exports){
"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var ASTQAdapterParse5=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"taste",value:function(e){return"object"===_typeof(e)&&null!==e&&!("object"===("undefined"==typeof Node?"undefined":_typeof(Node))&&e instanceof Node)&&"string"==typeof e.nodeName&&""!==e.nodeName}},{key:"getParentNode",value:function(e){return e.parentNode}},{key:"getChildNodes",value:function(e){return"object"===_typeof(e.childNodes)&&e.childNodes instanceof Array?e.childNodes:[]}},{key:"getNodeType",value:function(e){return e.nodeName}},{key:"getNodeAttrNames",value:function(e){var t=["value"];return"object"===_typeof(e.attrs)&&e.attrs instanceof Array&&(t=t.concat(e.attrs.map(function(e){return e.name}))),t}},{key:"getNodeAttrValue",value:function(e,t){var n;if("value"===t)n=e.value;else if("object"===_typeof(e.attrs)&&e.attrs instanceof Array){var o=e.attrs.filter(function(e){return e.name===t}).map(function(e){return e.value});1===o.length&&(n=o[0])}return n}}]),e}();exports.default=ASTQAdapterParse5;
},{}],10:[function(_dereq_,module,exports){
"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var ASTQAdapterXMLDOM=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"taste",value:function(e){return"object"===("undefined"==typeof Node?"undefined":_typeof(Node))&&null!==e&&e instanceof Node&&"object"===_typeof(e)&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName}},{key:"getParentNode",value:function(e){return e.parentNode}},{key:"getChildNodes",value:function(e){return"object"===_typeof(e.childNodes)&&null!==e.childNodes&&e.hasChildNodes()?Array.prototype.slice.call(e.childNodes,0):[]}},{key:"getNodeType",value:function(e){return"string"==typeof e.nodeName?e.nodeName:"unknown"}},{key:"getNodeAttrNames",value:function(e){return"object"===_typeof(e.attributes)&&null!==e.attributes&&e.hasAttributes()?Array.prototype.slice.call(e.attributes,0).map(function(e){return e.nodeName}):[]}},{key:"getNodeAttrValue",value:function(e,t){return"object"===_typeof(e.attributes)&&null!==e.attributes&&e.hasAttributes()?e.getAttribute(t):void 0}}]),e}();exports.default=ASTQAdapterXMLDOM;
},{}],11:[function(_dereq_,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var ASTQAdapter=function(){function e(){return _classCallCheck(this,e),this._adapters=[],this}return _createClass(e,[{key:"register",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._adapters.unshift({adapter:e,force:t}),this}},{key:"unregister",value:function(e){if(void 0===e)this._adapters=[];else{for(var t=[],r=0;r<this._adapters.length;r++)this._adapters[r].adapter!==e&&t.push(this._adapters[r]);this._adapters=t}return this}},{key:"select",value:function(e){for(var t=0;t<this._adapters.length;t++)if(this._adapters[t].force||this._adapters[t].adapter.taste(e))return this._adapters[t].adapter}}]),e}();exports.default=ASTQAdapter;
},{}],12:[function(_dereq_,module,exports){
"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _pos=function(t,n){var e=t.getParentNode(n,"*");if(null===e)return 1;for(var r=t.getChildNodes(e,"*"),o=0;o<r.length;o++)if(r[o]===n)return o+1;throw new Error("cannot find myself")},parents=function(t,n){for(var e=[];null!==(n=t.getParentNode(n,"*"));)e.push(n);return e},stdfuncs={type:function(t,n){return t.getNodeType(n)},attrs:function(t,n,e){return void 0===e&&(e=" "),e+t.getNodeAttrNames(n).join(e)+e},depth:function(t,n){for(var e=1,r=n;null!==(r=t.getParentNode(r,"*"));)e++;return e},pos:function(t,n){return _pos(t,n)},nth:function(t,n,e){e=parseInt(e,10);var r=t.getParentNode(n,"*");if(null!==r){var o=t.getChildNodes(r,"*");e<0&&(e=o.length-(e+1));for(var u=0;u<o.length;u++)if(o[u]===n)return u+1===e;return!1}return 1===e},first:function(t,n){return stdfuncs.nth(t,n,1)},last:function(t,n){return stdfuncs.nth(t,n,-1)},count:function(t,n,e){return"object"===_typeof(e)&&e instanceof Array?e.length:"object"===_typeof(e)?Object.keys(e).length:"string"==typeof e?e.length:String(e).length},below:function(t,n,e){if(!t.taste(e))throw new Error('invalid argument to function "below" (node expected)');for(var r=n;null!==(r=t.getParentNode(r,"*"));)if(r===e)return!0;return!1},follows:function(t,n,e){if(!t.taste(e))throw new Error('invalid argument to function "follows" (node expected)');if(n===e)return!1;var r,o=[n].concat(parents(t,n)).reverse(),u=[e].concat(parents(t,e)).reverse(),f=Math.min(o.length,u.length);for(r=0;r<f&&o[r]===u[r];r++);if(0===r)throw new Error("internal error: root nodes have to be same same");return r===f?u.length<o.length:_pos(t,o[r])>_pos(t,u[r])},in:function(t,n,e){if(!("object"===_typeof(e)&&e instanceof Array))throw new Error('invalid argument to function "in" (array expected)');for(var r=0;r<e.length;r++)if(e[r]===n)return!0;return!1},substr:function(t,n,e,r,o){return String(e).substr(r,o)},index:function(t,n,e,r,o){return String(e).indexOf(r,o)},trim:function(t,n,e){return String(e).trim()},lc:function(t,n,e){return String(e).toLowerCase()},uc:function(t,n,e){return String(e).toUpperCase()}},_default=stdfuncs;exports.default=_default;
},{}],13:[function(_dereq_,module,exports){
"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var r=0;r<n.length;r++){var t=n[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function _createClass(e,n,r){return n&&_defineProperties(e.prototype,n),r&&_defineProperties(e,r),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var ASTQFuncs=function(){function e(){return _classCallCheck(this,e),this._funcs={},this}return _createClass(e,[{key:"register",value:function(e,n){this._funcs[e]=n}},{key:"run",value:function(e,n){var r=this._funcs[e];if("function"!=typeof r)throw new Error('invalid function "'+e+'"');return r.apply(null,n)}}]),e}();exports.default=ASTQFuncs;
},{}],14:[function(_dereq_,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _astqUtil=_interopRequireDefault(_dereq_("./astq-util.js")),_astqQueryTrace=_interopRequireDefault(_dereq_("./astq-query-trace.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ASTQQueryExec=function(e){function t(e,r,a,i){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).adapter=e,n.params=r,n.funcs=a,n.trace=i,n}return _inherits(t,_astqQueryTrace["default"]),_createClass(t,[{key:"execQuery",value:function(e,t){var r=this;this.traceInitialize(),this.traceBegin(e,t);var a=[];return e.childs().forEach(function(e){a=a.concat(r.execPath(e,t))}),this.traceEnd(e,t,a),a}},{key:"execPath",value:function(e,t){var r=this;this.traceBegin(e,t);var a=[t],i=[],n=!1;return e.childs().forEach(function(e){var t=[];a.forEach(function(a){t=t.concat(r.execStep(e,a))}),a=t,e.get("isResult")&&(n=!0,i=i.concat(a))}),this.traceEnd(e,t,a),n?i:a}},{key:"execStep",value:function(e,t){var r=this;this.traceBegin(e,t);var a=e.childs(),i=null,n=null,c=null,s=0;if(s<a.length&&"Axis"===a[s].type()&&(i=a[s++]),s<a.length&&"Match"===a[s].type()&&(n=a[s++]),s<a.length&&"Filter"===a[s].type()&&(c=a[s++]),null===n)throw new Error("no matching part in query step");var l=[],u=n.get("id"),o=function(e){var t=r.adapter.getNodeType(e);if("*"===u||u===t){var a=!0;null!==c&&(r.execFilter(c,e)||(a=!1)),a&&l.push(e)}};if(null!==i){var h=i.get("op"),f=i.get("type");if("/"===h)this.adapter.getChildNodes(t,f).forEach(function(e){return o(e)});else if("//"===h){this.adapter.getChildNodes(t,f).forEach(function(e){return function e(t){o(t),r.adapter.getChildNodes(t,f).forEach(function(t){return e(t)})}(e)})}else if("./"===h)o(t),this.adapter.getChildNodes(t,f).forEach(function(e){return o(e)});else if(".//"===h){o(t);this.adapter.getChildNodes(t,f).forEach(function(e){return function e(t){o(t),r.adapter.getChildNodes(t,f).forEach(function(t){return e(t)})}(e)})}else if("-/"===h){var d=this.adapter.getParentNode(t,"*");if(null!==d){for(var p=this.adapter.getChildNodes(d,f),x=null,g=0;g<p.length&&p[g]!==t;g++)x=p[g];null!==x&&o(x)}}else if("-//"===h){var E=this.adapter.getParentNode(t,"*");if(null!==E){for(var v=this.adapter.getChildNodes(E,f),y=0;y<v.length&&v[y]!==t;y++);for(y--;y>=0;y--)o(v[y])}}else if("+/"===h){var b=this.adapter.getParentNode(t,"*");if(null!==b){var _,k=this.adapter.getChildNodes(b,f);for(_=0;_<k.length&&k[_]!==t;_++);_<k.length&&o(k[++_])}}else if("+//"===h){var m=this.adapter.getParentNode(t,"*");if(null!==m){var q,U=this.adapter.getChildNodes(m,f);for(q=0;q<U.length&&U[q]!==t;q++);if(q<U.length)for(q++;q<U.length;q++)o(U[q])}}else if("~/"===h){var C=this.adapter.getParentNode(t,"*");if(null!==C){var P,N=this.adapter.getChildNodes(C,f);for(P=0;P<N.length&&N[P]!==t;P++);P>0&&o(N[P-1]),P<N.length-1&&o(N[P+1])}}else if("~//"===h){var B=this.adapter.getParentNode(t,"*");if(null!==B)for(var w=this.adapter.getChildNodes(B,f),O=0;O<w.length;O++)w[O]!==t&&o(w[O])}else if("../"===h){var L=this.adapter.getParentNode(t,f);null!==L&&o(L)}else if("..//"===h)for(var R=t;;){var S=this.adapter.getParentNode(R,f);if(null===S)break;o(S),R=S}else if("<//"===h){for(var T={sentinel:t,take:!0};;){var j=this.adapter.getParentNode(t,"*");if(null===j)break;t=j}t!==T.sentinel&&(o(t),this.adapter.getChildNodes(t,f).forEach(function(e){return function e(t){t===T.sentinel&&(T.take=!1),T.take&&o(t),T.take&&r.adapter.getChildNodes(t,f).forEach(function(t){return e(t)})}(e)})),l=l.reverse()}else if(">//"===h){for(var A={sentinel:t,take:!1};;){var Q=this.adapter.getParentNode(t,"*");if(null===Q)break;t=Q}this.adapter.getChildNodes(t,f).forEach(function(e){return function e(t){A.take&&o(t),t===A.sentinel&&(A.take=!0),r.adapter.getChildNodes(t,f).forEach(function(t){return e(t)})}(e)})}}else o(t);return this.traceEnd(e,t,l),l}},{key:"execFilter",value:function(e,t){this.traceBegin(e,t);var r=e.childs()[0],a=this.execExpr(r,t);return a=_astqUtil.default.truthy(a),this.traceEnd(e,t,a),a}},{key:"execExpr",value:function(e,t){switch(e.type()){case"ConditionalBinary":return this.execExprConditionalBinary(e,t);case"ConditionalTernary":return this.execExprConditionalTernary(e,t);case"Logical":return this.execExprLogical(e,t);case"Bitwise":return this.execExprBitwise(e,t);case"Relational":return this.execExprRelational(e,t);case"Arithmetical":return this.execExprArithmetical(e,t);case"Unary":return this.execExprUnary(e,t);case"FuncCall":return this.execExprFuncCall(e,t);case"Attribute":return this.execExprAttribute(e,t);case"Param":return this.execExprParam(e,t);case"LiteralString":return this.execExprLiteralString(e,t);case"LiteralRegExp":return this.execExprLiteralRegExp(e,t);case"LiteralNumber":return this.execExprLiteralNumber(e,t);case"LiteralValue":return this.execExprLiteralValue(e,t);case"Path":return this.execExprPath(e,t)}}},{key:"execExprConditionalBinary",value:function(e,t){this.traceBegin(e,t);var r=this.execExpr(e.childs()[0],t);return _astqUtil.default.truthy(r)||(r=this.execExpr(e.childs()[1],t)),this.traceEnd(e,t,r),r}},{key:"execExprConditionalTernary",value:function(e,t){this.traceBegin(e,t);var r=this.execExpr(e.childs()[0],t);return r=_astqUtil.default.truthy(r)?this.execExpr(e.childs()[1],t):this.execExpr(e.childs()[2],t),this.traceEnd(e,t,r),r}},{key:"execExprLogical",value:function(e,t){this.traceBegin(e,t);var r=!1;switch(e.get("op")){case"&&":(r=_astqUtil.default.truthy(this.execExpr(e.childs()[0],t)))&&(r=r&&_astqUtil.default.truthy(this.execExpr(e.childs()[1],t)));break;case"||":(r=_astqUtil.default.truthy(this.execExpr(e.childs()[0],t)))||(r=r||_astqUtil.default.truthy(this.execExpr(e.childs()[1],t)))}return this.traceEnd(e,t,r),r}},{key:"execExprBitwise",value:function(e,t){this.traceBegin(e,t);var r,a=_astqUtil.default.coerce(this.execExpr(e.childs()[0],t),"number"),i=_astqUtil.default.coerce(this.execExpr(e.childs()[1],t),"number");switch(e.get("op")){case"&":r=a&i;break;case"|":r=a|i;break;case"<<":r=a<<i;break;case">>":r=a>>i}return this.traceEnd(e,t,r),r}},{key:"execExprRelational",value:function(e,t){this.traceBegin(e,t);var r,a=this.execExpr(e.childs()[0],t),i=this.execExpr(e.childs()[1],t);switch(e.get("op")){case"==":r=a===i;break;case"!=":r=a!==i;break;case"<=":r=_astqUtil.default.coerce(a,"number")<=_astqUtil.default.coerce(i,"number");break;case">=":r=_astqUtil.default.coerce(a,"number")>=_astqUtil.default.coerce(i,"number");break;case"<":r=_astqUtil.default.coerce(a,"number")<_astqUtil.default.coerce(i,"number");break;case">":r=_astqUtil.default.coerce(a,"number")>_astqUtil.default.coerce(i,"number");break;case"=~":r=null!==_astqUtil.default.coerce(a,"string").match(_astqUtil.default.coerce(i,"regexp"));break;case"!~":r=null===_astqUtil.default.coerce(a,"string").match(_astqUtil.default.coerce(i,"regexp"))}return this.traceEnd(e,t,r),r}},{key:"execExprArithmetical",value:function(e,t){this.traceBegin(e,t);var r,a=this.execExpr(e.childs()[0],t),i=this.execExpr(e.childs()[1],t);switch(e.get("op")){case"+":r="string"==typeof a?a+_astqUtil.default.coerce(i,"string"):_astqUtil.default.coerce(a,"number")+_astqUtil.default.coerce(i,"number");break;case"-":r=_astqUtil.default.coerce(a,"number")+_astqUtil.default.coerce(i,"number");break;case"*":r=_astqUtil.default.coerce(a,"number")*_astqUtil.default.coerce(i,"number");break;case"/":r=_astqUtil.default.coerce(a,"number")/_astqUtil.default.coerce(i,"number");break;case"%":r=_astqUtil.default.coerce(a,"number")%_astqUtil.default.coerce(i,"number");break;case"**":r=Math.pow(_astqUtil.default.coerce(a,"number"),_astqUtil.default.coerce(i,"number"))}return this.traceEnd(e,t,r),r}},{key:"execExprUnary",value:function(e,t){this.traceBegin(e,t);var r,a=this.execExpr(e.childs()[0],t);switch(e.get("op")){case"!":r=!_astqUtil.default.coerce(a,"boolean");break;case"~":r=~_astqUtil.default.coerce(a,"number")}return this.traceEnd(e,t,r),r}},{key:"execExprFuncCall",value:function(e,t){var r=this;this.traceBegin(e,t);var a=e.get("id"),i=[this.adapter,t];e.childs().forEach(function(e){i.push(r.execExpr(e,t))});var n=this.funcs.run(a,i);return this.traceEnd(e,t,n),n}},{key:"execExprAttribute",value:function(e,t){this.traceBegin(e,t);var r=e.get("id"),a=this.adapter.getNodeAttrValue(t,r);return this.traceEnd(e,t,a),a}},{key:"execExprParam",value:function(e,t){this.traceBegin(e,t);var r=e.get("id");if(void 0===this.params[r])throw new Error('invalid parameter "'+r+'"');var a=this.params[r];return this.traceEnd(e,t,a),a}},{key:"execExprLiteralString",value:function(e,t){this.traceBegin(e,t);var r=e.get("value");return this.traceEnd(e,t,r),r}},{key:"execExprLiteralRegExp",value:function(e,t){this.traceBegin(e,t);var r=e.get("value");return this.traceEnd(e,t,r),r}},{key:"execExprLiteralNumber",value:function(e,t){this.traceBegin(e,t);var r=e.get("value");return this.traceEnd(e,t,r),r}},{key:"execExprLiteralValue",value:function(e,t){this.traceBegin(e,t);var r=e.get("value");return this.traceEnd(e,t,r),r}},{key:"execExprPath",value:function(e,t){this.traceBegin(e,t);var r=this.execPath(e,t);return this.traceEnd(e,t,r),r}}]),t}();exports.default=ASTQQueryExec;
},{"./astq-query-trace.js":15,"./astq-util.js":17}],15:[function(_dereq_,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _astqUtil=_interopRequireDefault(_dereq_("./astq-util.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}var ASTQQueryTrace=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"traceInitialize",value:function(){this.lastTrace=[]}},{key:"prefixOf",value:function(e,t){for(var r=0,a=e;null!==(a=a.parent());)r++;var i=_astqUtil.default.pad("",4*r);for(r=0,a=t;null!==(a=this.adapter.getParentNode(a,"*"));)r++;return{prefix1:i,prefix2:_astqUtil.default.pad("",4*r)}}},{key:"traceBegin",value:function(e,t){if(this.trace){var r=this.prefixOf(e,t),a=r.prefix1,i=r.prefix2;this.lastTrace.push({event:"begin",prefix1:a,prefix2:i,queryType:e.type(),nodeType:this.adapter.getNodeType(t),timestamp:Date.now()}),console.log("ASTQ: execute: | "+_astqUtil.default.pad(a+e.type()+" (",-60)+" | "+i+this.adapter.getNodeType(t))}}},{key:"traceEnd",value:function(e,t,r){var a=this;if(this.trace){var i,o=this.prefixOf(e,t),n=o.prefix1,p=o.prefix2,f=[];void 0===r?i="undefined":"object"===_typeof(r)&&r instanceof Array?(i="[",r.forEach(function(e){i+="node("+a.adapter.getNodeType(e)+"),",f.push(a.adapter.getNodeType(e))}),i=i.replace(/,$/,"")+"]"):i=_typeof(r)+"("+r+")",i.length>60&&(i=i.substr(0,60)+"..."),this.lastTrace.push({event:"end",prefix1:n,prefix2:p,queryType:e.type(),nodeType:this.adapter.getNodeType(t),timestamp:Date.now(),value:f}),console.log("ASTQ: execute: | "+_astqUtil.default.pad(n+"): "+i,-60)+" | "+p+this.adapter.getNodeType(t))}}}]),e}();exports.default=ASTQQueryTrace;
},{"./astq-util.js":17}],16:[function(_dereq_,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _asty=_interopRequireDefault(_dereq_("asty")),_pegjsUtil=_interopRequireDefault(_dereq_("pegjs-util")),_astqQueryExec=_interopRequireDefault(_dereq_("./astq-query-exec.js"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,r,e){return r&&_defineProperties(t.prototype,r),e&&_defineProperties(t,e),t}var ASTQQueryParse=function(){function t(r,e,n,u){this.message=r,this.expected=e,this.found=n,this.location=u,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t)}return function(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}(t,Error),t.buildMessage=function(t,r){var e={literal:function(t){return'"'+u(t.text)+'"'},class:function(t){var r,e="";for(r=0;r<t.parts.length;r++)e+=t.parts[r]instanceof Array?s(t.parts[r][0])+"-"+s(t.parts[r][1]):s(t.parts[r]);return"["+(t.inverted?"^":"")+e+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},other:function(t){return t.description}};function n(t){return t.charCodeAt(0).toString(16).toUpperCase()}function u(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+n(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+n(t)})}function s(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+n(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+n(t)})}return"Expected "+function(t){var r,n,u,s=new Array(t.length);for(r=0;r<t.length;r++)s[r]=(u=t[r],e[u.type](u));if(s.sort(),s.length>0){for(r=1,n=1;r<s.length;r++)s[r-1]!==s[r]&&(s[n]=s[r],n++);s.length=n}switch(s.length){case 1:return s[0];case 2:return s[0]+" or "+s[1];default:return s.slice(0,-1).join(", ")+", or "+s[s.length-1]}}(t)+" but "+function(t){return t?'"'+u(t)+'"':"end of input"}(r)+" found."},{SyntaxError:t,parse:function(r,e){e=void 0!==e?e:{};var n,u={},s={query:Dn},a=Dn,o=function(t){return t},i=",",c=Nn(",",!1),l=function(t,r){return pu("Query").add(du(t,r,3))},f=function(t,r){return pu("Path").add(du(t,r,1))},h="!",A=Nn("!",!1),d=function(t,r,e,n){return pu("Step").add(t,r,n).set(null!==e?{isResult:!0}:{})},p=Mn("axis"),x="//",b=Nn("//",!1),g="/",v=Nn("/",!1),P="-//",C=Nn("-//",!1),y="-/",m=Nn("-/",!1),_="+//",S=Nn("+//",!1),T="+/",w=Nn("+/",!1),q="~//",Q=Nn("~//",!1),E="~/",R=Nn("~/",!1),F="..//",L=Nn("..//",!1),k="../",N=Nn("../",!1),j=".//",M=Nn(".//",!1),I="./",U=Nn("./",!1),V="<//",z=Nn("<//",!1),D=">//",Z=Nn(">//",!1),O=function(t,r){return pu("Axis").set({op:t,type:null!==r?r:"*"})},B=":",$=Nn(":",!1),G=function(t){return t.get("id")},H=function(t){return t.get("value")},J=function(t){return pu("Match").merge(t)},K=function(t){return pu("Match").set({id:t.get("value")})},W="*",X=Nn("*",!1),Y=function(){return pu("Match").set({id:"*"})},tt="[",rt=Nn("[",!1),et="]",nt=Nn("]",!1),ut=function(t){return pu("Filter").add(t)},st="?:",at=Nn("?:",!1),ot=function(t,r){return pu("ConditionalBinary").add(t,r)},it="?",ct=Nn("?",!1),lt=function(t,r,e){return pu("ConditionalTernary").add(t,r,e)},ft="||",ht=Nn("||",!1),At=function(t,r,e){return pu("Logical").set({op:r}).add(t,e)},dt="&&",pt=Nn("&&",!1),xt="|",bt=Nn("|",!1),gt=function(t,r,e){return pu("Bitwise").set({op:r}).add(t,e)},vt="^",Pt=Nn("^",!1),Ct="&",yt=Nn("&",!1),mt="==",_t=Nn("==",!1),St="!=",Tt=Nn("!=",!1),wt="<=",qt=Nn("<=",!1),Qt=">=",Et=Nn(">=",!1),Rt="<",Ft=Nn("<",!1),Lt=">",kt=Nn(">",!1),Nt="=~",jt=Nn("=~",!1),Mt="!~",It=Nn("!~",!1),Ut=function(t,r,e){return pu("Relational").set({op:r}).add(t,e)},Vt="<<",zt=Nn("<<",!1),Dt=">>",Zt=Nn(">>",!1),Ot="+",Bt=Nn("+",!1),$t="-",Gt=Nn("-",!1),Ht=function(t,r,e){return pu("Arithmetical").set({op:r}).add(t,e)},Jt="**",Kt=Nn("**",!1),Wt="%",Xt=Nn("%",!1),Yt="~",tr=Nn("~",!1),rr=function(t,r){return pu("Unary").set({op:t}).add(r)},er="(",nr=Nn("(",!1),ur=")",sr=Nn(")",!1),ar=function(t,r){return pu("FuncCall").merge(t).add(r)},or=function(t,r){return du(t,r,3)},ir=Mn("node attribute"),cr="@",lr=Nn("@",!1),fr=function(t){return pu("Attribute").merge(t)},hr=function(t){return pu("Attribute").set({id:t.get("value")})},Ar=Mn("query parameter reference"),dr="{",pr=Nn("{",!1),xr="}",br=Nn("}",!1),gr=function(t){return pu("Param").merge(t)},vr=function(t){return t},Pr=Mn("identifier"),Cr=/^[a-zA-Z_]/,yr=jn([["a","z"],["A","Z"],"_"],!1,!1),mr=/^[a-zA-Z0-9_\-]/,_r=jn([["a","z"],["A","Z"],["0","9"],"_","-"],!1,!1),Sr=function(t){return pu("Identifier").set({id:t})},Tr=Mn("quoted string literal"),wr='"',qr=Nn('"',!1),Qr=/^[^"]/,Er=jn(['"'],!0,!1),Rr=function(t){return pu("LiteralString").set({value:t.join("")})},Fr="'",Lr=Nn("'",!1),kr=/^[^']/,Nr=jn(["'"],!0,!1),jr=Mn("escaped double-quoted-string character"),Mr="\\\\",Ir=Nn("\\\\",!1),Ur=function(){return"\\"},Vr='\\"',zr=Nn('\\"',!1),Dr=function(){return'"'},Zr="\\b",Or=Nn("\\b",!1),Br=function(){return"\b"},$r="\\v",Gr=Nn("\\v",!1),Hr=function(){return"\v"},Jr="\\f",Kr=Nn("\\f",!1),Wr=function(){return"\f"},Xr="\\t",Yr=Nn("\\t",!1),te=function(){return"\t"},re="\\r",ee=Nn("\\r",!1),ne=function(){return"\r"},ue="\\n",se=Nn("\\n",!1),ae=function(){return"\n"},oe="\\e",ie=Nn("\\e",!1),ce=function(){return""},le="\\x",fe=Nn("\\x",!1),he=/^[0-9a-fA-F]/,Ae=jn([["0","9"],["a","f"],["A","F"]],!1,!1),de=function(t){return String.fromCharCode(parseInt(t,16))},pe="\\u",xe=Nn("\\u",!1),be=Mn("escaped single-quoted-string character"),ge="\\'",ve=Nn("\\'",!1),Pe=function(){return"'"},Ce=Mn("regular expression literal"),ye="`",me=Nn("`",!1),_e="\\`",Se=Nn("\\`",!1),Te=/^[^`]/,we=jn(["`"],!0,!1),qe=function(r){var e;try{e=new RegExp(r.replace(/\\`/g,"`"))}catch(r){!function(r,e){throw e=void 0!==e?e:Un(qn,wn),function(r,e){return new t(r,null,null,e)}(r,e)}(r.message)}return pu("LiteralRegExp").set({value:e})},Qe=Mn("numeric literal"),Ee=/^[+\-]/,Re=jn(["+","-"],!1,!1),Fe="0b",Le=Nn("0b",!1),ke=/^[01]/,Ne=jn(["0","1"],!1,!1),je=function(t,r){return pu("LiteralNumber").set({value:parseInt(t+r,2)})},Me="0o",Ie=Nn("0o",!1),Ue=/^[0-7]/,Ve=jn([["0","7"]],!1,!1),ze=function(t,r){return pu("LiteralNumber").set({value:parseInt(t+r,8)})},De="0x",Ze=Nn("0x",!1),Oe=function(t,r){return pu("LiteralNumber").set({value:parseInt(t+r,16)})},Be=/^[0-9]/,$e=jn([["0","9"]],!1,!1),Ge=".",He=Nn(".",!1),Je=/^[eE]/,Ke=jn(["e","E"],!1,!1),We=function(t){return pu("LiteralNumber").set({value:parseFloat(t)})},Xe=function(t){return pu("LiteralNumber").set({value:parseInt(t,10)})},Ye=Mn("global value"),tn="true",rn=Nn("true",!1),en=function(){return pu("LiteralValue").set({value:!0})},nn="false",un=Nn("false",!1),sn=function(){return pu("LiteralValue").set({value:!1})},an="null",on=Nn("null",!1),cn=function(){return pu("LiteralValue").set({value:null})},ln="NaN",fn=Nn("NaN",!1),hn=function(){return pu("LiteralValue").set({value:NaN})},An="undefined",dn=Nn("undefined",!1),pn=function(){return pu("LiteralValue").set({value:void 0})},xn=Mn("optional blank"),bn=Mn("multi-line comment"),gn="/*",vn=Nn("/*",!1),Pn="*/",Cn=Nn("*/",!1),yn={type:"any"},mn=Mn("any whitespaces"),_n=/^[ \t\r\n]/,Sn=jn([" ","\t","\r","\n"],!1,!1),Tn=Mn("end of file"),wn=0,qn=0,Qn=[{line:1,column:1}],En=0,Rn=[],Fn=0,Ln={};if("startRule"in e){if(!(e.startRule in s))throw new Error("Can't start parsing from rule \""+e.startRule+'".');a=s[e.startRule]}function kn(){return Un(qn,wn)}function Nn(t,r){return{type:"literal",text:t,ignoreCase:r}}function jn(t,r,e){return{type:"class",parts:t,inverted:r,ignoreCase:e}}function Mn(t){return{type:"other",description:t}}function In(t){var e,n=Qn[t];if(n)return n;for(e=t-1;!Qn[e];)e--;for(n={line:(n=Qn[e]).line,column:n.column};e<t;)10===r.charCodeAt(e)?(n.line++,n.column=1):n.column++,e++;return Qn[t]=n,n}function Un(t,r){var e=In(t),n=In(r);return{start:{offset:t,line:e.line,column:e.column},end:{offset:r,line:n.line,column:n.column}}}function Vn(t){wn<En||(wn>En&&(En=wn,Rn=[]),Rn.push(t))}function zn(r,e,n){return new t(t.buildMessage(r,e),r,e,n)}function Dn(){var t,e,n=38*wn+0,s=Ln[n];return s?(wn=s.nextPos,s.result):(t=wn,fu()!==u&&(e=function(){var t,e,n,s,a,o,f,h,A=38*wn+1,d=Ln[A];if(d)return wn=d.nextPos,d.result;if(t=wn,(e=Zn())!==u){for(n=[],s=wn,(a=fu())!==u?(44===r.charCodeAt(wn)?(o=i,wn++):(o=u,0===Fn&&Vn(c)),o!==u&&(f=fu())!==u&&(h=Zn())!==u?s=a=[a,o,f,h]:(wn=s,s=u)):(wn=s,s=u);s!==u;)n.push(s),s=wn,(a=fu())!==u?(44===r.charCodeAt(wn)?(o=i,wn++):(o=u,0===Fn&&Vn(c)),o!==u&&(f=fu())!==u&&(h=Zn())!==u?s=a=[a,o,f,h]:(wn=s,s=u)):(wn=s,s=u);n!==u?(qn=t,e=l(e,n),t=e):(wn=t,t=u)}else wn=t,t=u;return Ln[A]={nextPos:wn,result:t},t}())!==u&&fu()!==u&&function(){var t,e,n=38*wn+37,s=Ln[n];return s?(wn=s.nextPos,s.result):(Fn++,t=wn,Fn++,r.length>wn?(e=r.charAt(wn),wn++):(e=u,0===Fn&&Vn(yn)),Fn--,e===u?t=void 0:(wn=t,t=u),Fn--,t===u&&(e=u,0===Fn&&Vn(Tn)),Ln[n]={nextPos:wn,result:t},t)}()!==u?(qn=t,t=o(e)):(wn=t,t=u),Ln[n]={nextPos:wn,result:t},t)}function Zn(){var t,e,n,s,a,o,i=38*wn+2,c=Ln[i];if(c)return wn=c.nextPos,c.result;if(t=wn,(e=function(){var t,e,n,s,a,o=38*wn+3,i=Ln[o];return i?(wn=i.nextPos,i.result):(t=wn,(e=Bn())===u&&(e=null),e!==u&&fu()!==u&&(n=$n())!==u&&fu()!==u?(33===r.charCodeAt(wn)?(s=h,wn++):(s=u,0===Fn&&Vn(A)),s===u&&(s=null),s!==u&&fu()!==u?((a=Gn())===u&&(a=null),a!==u?(qn=t,e=d(e,n,s,a),t=e):(wn=t,t=u)):(wn=t,t=u)):(wn=t,t=u),Ln[o]={nextPos:wn,result:t},t)}())!==u){for(n=[],s=wn,(a=fu())!==u&&(o=On())!==u?s=a=[a,o]:(wn=s,s=u);s!==u;)n.push(s),s=wn,(a=fu())!==u&&(o=On())!==u?s=a=[a,o]:(wn=s,s=u);n!==u?(qn=t,t=e=f(e,n)):(wn=t,t=u)}else wn=t,t=u;return Ln[i]={nextPos:wn,result:t},t}function On(){var t,e,n,s,a,o=38*wn+4,i=Ln[o];return i?(wn=i.nextPos,i.result):(t=wn,(e=Bn())!==u&&fu()!==u&&(n=$n())!==u&&fu()!==u?(33===r.charCodeAt(wn)?(s=h,wn++):(s=u,0===Fn&&Vn(A)),s===u&&(s=null),s!==u&&fu()!==u?((a=Gn())===u&&(a=null),a!==u?(qn=t,t=e=d(e,n,s,a)):(wn=t,t=u)):(wn=t,t=u)):(wn=t,t=u),Ln[o]={nextPos:wn,result:t},t)}function Bn(){var t,e,n,s=38*wn+5,a=Ln[s];return a?(wn=a.nextPos,a.result):(Fn++,t=wn,e=wn,r.substr(wn,2)===x?(n=x,wn+=2):(n=u,0===Fn&&Vn(b)),n===u&&(47===r.charCodeAt(wn)?(n=g,wn++):(n=u,0===Fn&&Vn(v)),n===u&&(r.substr(wn,3)===P?(n=P,wn+=3):(n=u,0===Fn&&Vn(C)),n===u&&(r.substr(wn,2)===y?(n=y,wn+=2):(n=u,0===Fn&&Vn(m)),n===u&&(r.substr(wn,3)===_?(n=_,wn+=3):(n=u,0===Fn&&Vn(S)),n===u&&(r.substr(wn,2)===T?(n=T,wn+=2):(n=u,0===Fn&&Vn(w)),n===u&&(r.substr(wn,3)===q?(n=q,wn+=3):(n=u,0===Fn&&Vn(Q)),n===u&&(r.substr(wn,2)===E?(n=E,wn+=2):(n=u,0===Fn&&Vn(R)),n===u&&(r.substr(wn,4)===F?(n=F,wn+=4):(n=u,0===Fn&&Vn(L)),n===u&&(r.substr(wn,3)===k?(n=k,wn+=3):(n=u,0===Fn&&Vn(N)),n===u&&(r.substr(wn,3)===j?(n=j,wn+=3):(n=u,0===Fn&&Vn(M)),n===u&&(r.substr(wn,2)===I?(n=I,wn+=2):(n=u,0===Fn&&Vn(U)),n===u&&(r.substr(wn,3)===V?(n=V,wn+=3):(n=u,0===Fn&&Vn(z)),n===u&&(r.substr(wn,3)===D?(n=D,wn+=3):(n=u,0===Fn&&Vn(Z))))))))))))))),(e=n!==u?r.substring(e,wn):n)!==u?((n=function(){var t,e,n,s=38*wn+6,a=Ln[s];return a?(wn=a.nextPos,a.result):(t=wn,58===r.charCodeAt(wn)?(e=B,wn++):(e=u,0===Fn&&Vn($)),e!==u&&(n=au())!==u?(qn=t,e=G(n),t=e):(wn=t,t=u),t===u&&(t=wn,58===r.charCodeAt(wn)?(e=B,wn++):(e=u,0===Fn&&Vn($)),e!==u&&(n=ou())!==u?(qn=t,e=H(n),t=e):(wn=t,t=u)),Ln[s]={nextPos:wn,result:t},t)}())===u&&(n=null),n!==u?(qn=t,t=e=O(e,n)):(wn=t,t=u)):(wn=t,t=u),Fn--,t===u&&(e=u,0===Fn&&Vn(p)),Ln[s]={nextPos:wn,result:t},t)}function $n(){var t,e,n=38*wn+7,s=Ln[n];return s?(wn=s.nextPos,s.result):(t=wn,(e=au())!==u&&(qn=t,e=J(e)),(t=e)===u&&(t=wn,(e=ou())!==u&&(qn=t,e=K(e)),(t=e)===u&&(t=wn,42===r.charCodeAt(wn)?(e=W,wn++):(e=u,0===Fn&&Vn(X)),e!==u&&(qn=t,e=Y()),t=e)),Ln[n]={nextPos:wn,result:t},t)}function Gn(){var t,e,n,s,a=38*wn+8,o=Ln[a];return o?(wn=o.nextPos,o.result):(t=wn,91===r.charCodeAt(wn)?(e=tt,wn++):(e=u,0===Fn&&Vn(rt)),e!==u&&fu()!==u&&(n=Hn())!==u&&fu()!==u?(93===r.charCodeAt(wn)?(s=et,wn++):(s=u,0===Fn&&Vn(nt)),s!==u?(qn=t,t=e=ut(n)):(wn=t,t=u)):(wn=t,t=u),Ln[a]={nextPos:wn,result:t},t)}function Hn(){var t,e,n,s,a,o,i=38*wn+9,c=Ln[i];return c?(wn=c.nextPos,c.result):(t=wn,(e=Jn())!==u&&fu()!==u?(r.substr(wn,2)===st?(n=st,wn+=2):(n=u,0===Fn&&Vn(at)),n!==u&&fu()!==u&&(s=Jn())!==u?(qn=t,t=e=ot(e,s)):(wn=t,t=u)):(wn=t,t=u),t===u&&(t=wn,(e=Jn())!==u&&fu()!==u?(63===r.charCodeAt(wn)?(n=it,wn++):(n=u,0===Fn&&Vn(ct)),n!==u&&fu()!==u&&(s=Jn())!==u&&fu()!==u?(58===r.charCodeAt(wn)?(a=B,wn++):(a=u,0===Fn&&Vn($)),a!==u&&fu()!==u&&(o=Jn())!==u?(qn=t,t=e=lt(e,s,o)):(wn=t,t=u)):(wn=t,t=u)):(wn=t,t=u),t===u&&(t=Jn())),Ln[i]={nextPos:wn,result:t},t)}function Jn(){var t,e,n,s,a,o=38*wn+10,i=Ln[o];return i?(wn=i.nextPos,i.result):(t=wn,(e=Kn())!==u&&fu()!==u?(n=wn,r.substr(wn,2)===ft?(s=ft,wn+=2):(s=u,0===Fn&&Vn(ht)),(n=s!==u?r.substring(n,wn):s)!==u&&(s=fu())!==u&&(a=Jn())!==u?(qn=t,t=e=At(e,n,a)):(wn=t,t=u)):(wn=t,t=u),t===u&&(t=Kn()),Ln[o]={nextPos:wn,result:t},t)}function Kn(){var t,e,n,s,a,o=38*wn+11,i=Ln[o];return i?(wn=i.nextPos,i.result):(t=wn,(e=Wn())!==u&&fu()!==u?(n=wn,r.substr(wn,2)===dt?(s=dt,wn+=2):(s=u,0===Fn&&Vn(pt)),(n=s!==u?r.substring(n,wn):s)!==u&&(s=fu())!==u&&(a=Kn())!==u?(qn=t,t=e=At(e,n,a)):(wn=t,t=u)):(wn=t,t=u),t===u&&(t=Wn()),Ln[o]={nextPos:wn,result:t},t)}function Wn(){var t,e,n,s,a,o=38*wn+12,i=Ln[o];return i?(wn=i.nextPos,i.result):(t=wn,(e=Xn())!==u&&fu()!==u?(n=wn,124===r.charCodeAt(wn)?(s=xt,wn++):(s=u,0===Fn&&Vn(bt)),(n=s!==u?r.substring(n,wn):s)!==u&&(s=fu())!==u&&(a=Wn())!==u?(qn=t,t=e=gt(e,n,a)):(wn=t,t=u)):(wn=t,t=u),t===u&&(t=Xn()),Ln[o]={nextPos:wn,result:t},t)}function Xn(){var t,e,n,s,a,o=38*wn+13,i=Ln[o];return i?(wn=i.nextPos,i.result):(t=wn,(e=Yn())!==u&&fu()!==u?(n=wn,94===r.charCodeAt(wn)?(s=vt,wn++):(s=u,0===Fn&&Vn(Pt)),(n=s!==u?r.substring(n,wn):s)!==u&&(s=fu())!==u&&(a=Xn())!==u?(qn=t,t=e=gt(e,n,a)):(wn=t,t=u)):(wn=t,t=u),t===u&&(t=Yn()),Ln[o]={nextPos:wn,result:t},t)}function Yn(){var t,e,n,s,a,o=38*wn+14,i=Ln[o];return i?(wn=i.nextPos,i.result):(t=wn,(e=tu())!==u&&fu()!==u?(n=wn,38===r.charCodeAt(wn)?(s=Ct,wn++):(s=u,0===Fn&&Vn(yt)),(n=s!==u?r.substring(n,wn):s)!==u&&(s=fu())!==u&&(a=Yn())!==u?(qn=t,t=e=gt(e,n,a)):(wn=t,t=u)):(wn=t,t=u),t===u&&(t=tu()),Ln[o]={nextPos:wn,result:t},t)}function tu(){var t,e,n,s,a,o=38*wn+15,i=Ln[o];return i?(wn=i.nextPos,i.result):(t=wn,(e=ru())!==u&&fu()!==u?(n=wn,r.substr(wn,2)===mt?(s=mt,wn+=2):(s=u,0===Fn&&Vn(_t)),s===u&&(r.substr(wn,2)===St?(s=St,wn+=2):(s=u,0===Fn&&Vn(Tt)),s===u&&(r.substr(wn,2)===wt?(s=wt,wn+=2):(s=u,0===Fn&&Vn(qt)),s===u&&(r.substr(wn,2)===Qt?(s=Qt,wn+=2):(s=u,0===Fn&&Vn(Et)),s===u&&(60===r.charCodeAt(wn)?(s=Rt,wn++):(s=u,0===Fn&&Vn(Ft)),s===u&&(62===r.charCodeAt(wn)?(s=Lt,wn++):(s=u,0===Fn&&Vn(kt)),s===u&&(r.substr(wn,2)===Nt?(s=Nt,wn+=2):(s=u,0===Fn&&Vn(jt)),s===u&&(r.substr(wn,2)===Mt?(s=Mt,wn+=2):(s=u,0===Fn&&Vn(It))))))))),(n=s!==u?r.substring(n,wn):s)!==u&&(s=fu())!==u&&(a=tu())!==u?(qn=t,t=e=Ut(e,n,a)):(wn=t,t=u)):(wn=t,t=u),t===u&&(t=ru()),Ln[o]={nextPos:wn,result:t},t)}function ru(){var t,e,n,s,a,o=38*wn+16,i=Ln[o];return i?(wn=i.nextPos,i.result):(t=wn,(e=eu())!==u&&fu()!==u?(n=wn,r.substr(wn,2)===Vt?(s=Vt,wn+=2):(s=u,0===Fn&&Vn(zt)),s===u&&(r.substr(wn,2)===Dt?(s=Dt,wn+=2):(s=u,0===Fn&&Vn(Zt))),(n=s!==u?r.substring(n,wn):s)!==u&&(s=fu())!==u&&(a=ru())!==u?(qn=t,t=e=gt(e,n,a)):(wn=t,t=u)):(wn=t,t=u),t===u&&(t=eu()),Ln[o]={nextPos:wn,result:t},t)}function eu(){var t,e,n,s,a,o=38*wn+17,i=Ln[o];return i?(wn=i.nextPos,i.result):(t=wn,(e=nu())!==u&&fu()!==u?(n=wn,43===r.charCodeAt(wn)?(s=Ot,wn++):(s=u,0===Fn&&Vn(Bt)),s===u&&(45===r.charCodeAt(wn)?(s=$t,wn++):(s=u,0===Fn&&Vn(Gt))),(n=s!==u?r.substring(n,wn):s)!==u&&(s=fu())!==u&&(a=eu())!==u?(qn=t,t=e=Ht(e,n,a)):(wn=t,t=u)):(wn=t,t=u),t===u&&(t=nu()),Ln[o]={nextPos:wn,result:t},t)}function nu(){var t,e,n,s,a,o=38*wn+18,i=Ln[o];return i?(wn=i.nextPos,i.result):(t=wn,(e=uu())!==u&&fu()!==u?(n=wn,r.substr(wn,2)===Jt?(s=Jt,wn+=2):(s=u,0===Fn&&Vn(Kt)),s===u&&(42===r.charCodeAt(wn)?(s=W,wn++):(s=u,0===Fn&&Vn(X)),s===u&&(47===r.charCodeAt(wn)?(s=g,wn++):(s=u,0===Fn&&Vn(v)),s===u&&(37===r.charCodeAt(wn)?(s=Wt,wn++):(s=u,0===Fn&&Vn(Xt))))),(n=s!==u?r.substring(n,wn):s)!==u&&(s=fu())!==u&&(a=nu())!==u?(qn=t,t=e=Ht(e,n,a)):(wn=t,t=u)):(wn=t,t=u),t===u&&(t=uu()),Ln[o]={nextPos:wn,result:t},t)}function uu(){var t,e,n,s=38*wn+19,a=Ln[s];return a?(wn=a.nextPos,a.result):(t=wn,e=wn,33===r.charCodeAt(wn)?(n=h,wn++):(n=u,0===Fn&&Vn(A)),n===u&&(126===r.charCodeAt(wn)?(n=Yt,wn++):(n=u,0===Fn&&Vn(tr))),(e=n!==u?r.substring(e,wn):n)!==u&&(n=su())!==u?(qn=t,t=e=rr(e,n)):(wn=t,t=u),t===u&&(t=su()),Ln[s]={nextPos:wn,result:t},t)}function su(){var t,e=38*wn+20,n=Ln[e];return n?(wn=n.nextPos,n.result):((t=function(){var t,e,n,s,a,o=38*wn+21,l=Ln[o];return l?(wn=l.nextPos,l.result):(t=wn,(e=au())!==u&&fu()!==u?(40===r.charCodeAt(wn)?(n=er,wn++):(n=u,0===Fn&&Vn(nr)),n!==u&&fu()!==u?((s=function(){var t,e,n,s,a,o,l,f,h=38*wn+22,A=Ln[h];if(A)return wn=A.nextPos,A.result;if(t=wn,(e=Hn())!==u){for(n=[],s=wn,(a=fu())!==u?(44===r.charCodeAt(wn)?(o=i,wn++):(o=u,0===Fn&&Vn(c)),o!==u&&(l=fu())!==u&&(f=Hn())!==u?s=a=[a,o,l,f]:(wn=s,s=u)):(wn=s,s=u);s!==u;)n.push(s),s=wn,(a=fu())!==u?(44===r.charCodeAt(wn)?(o=i,wn++):(o=u,0===Fn&&Vn(c)),o!==u&&(l=fu())!==u&&(f=Hn())!==u?s=a=[a,o,l,f]:(wn=s,s=u)):(wn=s,s=u);n!==u?(qn=t,e=or(e,n),t=e):(wn=t,t=u)}else wn=t,t=u;return Ln[h]={nextPos:wn,result:t},t}())===u&&(s=null),s!==u&&fu()!==u?(41===r.charCodeAt(wn)?(a=ur,wn++):(a=u,0===Fn&&Vn(sr)),a!==u?(qn=t,e=ar(e,s),t=e):(wn=t,t=u)):(wn=t,t=u)):(wn=t,t=u)):(wn=t,t=u),Ln[o]={nextPos:wn,result:t},t)}())===u&&(t=function(){var t,e,n,s=38*wn+23,a=Ln[s];return a?(wn=a.nextPos,a.result):(Fn++,t=wn,64===r.charCodeAt(wn)?(e=cr,wn++):(e=u,0===Fn&&Vn(lr)),e!==u&&(n=au())!==u?(qn=t,e=fr(n),t=e):(wn=t,t=u),t===u&&(t=wn,64===r.charCodeAt(wn)?(e=cr,wn++):(e=u,0===Fn&&Vn(lr)),e!==u&&(n=ou())!==u?(qn=t,e=hr(n),t=e):(wn=t,t=u)),Fn--,t===u&&(e=u,0===Fn&&Vn(ir)),Ln[s]={nextPos:wn,result:t},t)}())===u&&(t=function(){var t,e,n,s,a=38*wn+24,o=Ln[a];return o?(wn=o.nextPos,o.result):(Fn++,t=wn,123===r.charCodeAt(wn)?(e=dr,wn++):(e=u,0===Fn&&Vn(pr)),e!==u&&fu()!==u&&(n=au())!==u&&fu()!==u?(125===r.charCodeAt(wn)?(s=xr,wn++):(s=u,0===Fn&&Vn(br)),s!==u?(qn=t,e=gr(n),t=e):(wn=t,t=u)):(wn=t,t=u),Fn--,t===u&&(e=u,0===Fn&&Vn(Ar)),Ln[a]={nextPos:wn,result:t},t)}())===u&&(t=function(){var t,e=38*wn+25,n=Ln[e];return n?(wn=n.nextPos,n.result):((t=ou())===u&&(t=function(){var t,e,n,s,a,o=38*wn+31,i=Ln[o];if(i)return wn=i.nextPos,i.result;if(Fn++,t=wn,96===r.charCodeAt(wn)?(e=ye,wn++):(e=u,0===Fn&&Vn(me)),e!==u){for(n=wn,s=[],r.substr(wn,2)===_e?(a=_e,wn+=2):(a=u,0===Fn&&Vn(Se)),a===u&&(Te.test(r.charAt(wn))?(a=r.charAt(wn),wn++):(a=u,0===Fn&&Vn(we)));a!==u;)s.push(a),r.substr(wn,2)===_e?(a=_e,wn+=2):(a=u,0===Fn&&Vn(Se)),a===u&&(Te.test(r.charAt(wn))?(a=r.charAt(wn),wn++):(a=u,0===Fn&&Vn(we)));(n=s!==u?r.substring(n,wn):s)!==u?(96===r.charCodeAt(wn)?(s=ye,wn++):(s=u,0===Fn&&Vn(me)),s!==u?(qn=t,e=qe(n),t=e):(wn=t,t=u)):(wn=t,t=u)}else wn=t,t=u;return Fn--,t===u&&(e=u,0===Fn&&Vn(Ce)),Ln[o]={nextPos:wn,result:t},t}())===u&&(t=function(){var t,e,n,s,a,o,i,c,l,f,h,A,d=38*wn+32,p=Ln[d];if(p)return wn=p.nextPos,p.result;if(Fn++,t=wn,e=wn,Ee.test(r.charAt(wn))?(n=r.charAt(wn),wn++):(n=u,0===Fn&&Vn(Re)),n===u&&(n=null),(e=n!==u?r.substring(e,wn):n)!==u)if(r.substr(wn,2)===Fe?(n=Fe,wn+=2):(n=u,0===Fn&&Vn(Le)),n!==u){if(s=wn,a=[],ke.test(r.charAt(wn))?(o=r.charAt(wn),wn++):(o=u,0===Fn&&Vn(Ne)),o!==u)for(;o!==u;)a.push(o),ke.test(r.charAt(wn))?(o=r.charAt(wn),wn++):(o=u,0===Fn&&Vn(Ne));else a=u;(s=a!==u?r.substring(s,wn):a)!==u?(qn=t,e=je(e,s),t=e):(wn=t,t=u)}else wn=t,t=u;else wn=t,t=u;if(t===u){if(t=wn,e=wn,Ee.test(r.charAt(wn))?(n=r.charAt(wn),wn++):(n=u,0===Fn&&Vn(Re)),n===u&&(n=null),(e=n!==u?r.substring(e,wn):n)!==u)if(r.substr(wn,2)===Me?(n=Me,wn+=2):(n=u,0===Fn&&Vn(Ie)),n!==u){if(s=wn,a=[],Ue.test(r.charAt(wn))?(o=r.charAt(wn),wn++):(o=u,0===Fn&&Vn(Ve)),o!==u)for(;o!==u;)a.push(o),Ue.test(r.charAt(wn))?(o=r.charAt(wn),wn++):(o=u,0===Fn&&Vn(Ve));else a=u;(s=a!==u?r.substring(s,wn):a)!==u?(qn=t,e=ze(e,s),t=e):(wn=t,t=u)}else wn=t,t=u;else wn=t,t=u;if(t===u){if(t=wn,e=wn,Ee.test(r.charAt(wn))?(n=r.charAt(wn),wn++):(n=u,0===Fn&&Vn(Re)),n===u&&(n=null),(e=n!==u?r.substring(e,wn):n)!==u)if(r.substr(wn,2)===De?(n=De,wn+=2):(n=u,0===Fn&&Vn(Ze)),n!==u){if(s=wn,a=[],he.test(r.charAt(wn))?(o=r.charAt(wn),wn++):(o=u,0===Fn&&Vn(Ae)),o!==u)for(;o!==u;)a.push(o),he.test(r.charAt(wn))?(o=r.charAt(wn),wn++):(o=u,0===Fn&&Vn(Ae));else a=u;(s=a!==u?r.substring(s,wn):a)!==u?(qn=t,e=Oe(e,s),t=e):(wn=t,t=u)}else wn=t,t=u;else wn=t,t=u;if(t===u){if(t=wn,e=wn,n=wn,Ee.test(r.charAt(wn))?(s=r.charAt(wn),wn++):(s=u,0===Fn&&Vn(Re)),s===u&&(s=null),s!==u){for(a=[],Be.test(r.charAt(wn))?(o=r.charAt(wn),wn++):(o=u,0===Fn&&Vn($e));o!==u;)a.push(o),Be.test(r.charAt(wn))?(o=r.charAt(wn),wn++):(o=u,0===Fn&&Vn($e));if(a!==u)if(46===r.charCodeAt(wn)?(o=Ge,wn++):(o=u,0===Fn&&Vn(He)),o!==u){if(i=[],Be.test(r.charAt(wn))?(c=r.charAt(wn),wn++):(c=u,0===Fn&&Vn($e)),c!==u)for(;c!==u;)i.push(c),Be.test(r.charAt(wn))?(c=r.charAt(wn),wn++):(c=u,0===Fn&&Vn($e));else i=u;if(i!==u){if(c=wn,Je.test(r.charAt(wn))?(l=r.charAt(wn),wn++):(l=u,0===Fn&&Vn(Ke)),l!==u)if(Ee.test(r.charAt(wn))?(f=r.charAt(wn),wn++):(f=u,0===Fn&&Vn(Re)),f===u&&(f=null),f!==u){if(h=[],Be.test(r.charAt(wn))?(A=r.charAt(wn),wn++):(A=u,0===Fn&&Vn($e)),A!==u)for(;A!==u;)h.push(A),Be.test(r.charAt(wn))?(A=r.charAt(wn),wn++):(A=u,0===Fn&&Vn($e));else h=u;h!==u?c=l=[l,f,h]:(wn=c,c=u)}else wn=c,c=u;else wn=c,c=u;c===u&&(c=null),c!==u?n=s=[s,a,o,i,c]:(wn=n,n=u)}else wn=n,n=u}else wn=n,n=u;else wn=n,n=u}else wn=n,n=u;if((e=n!==u?r.substring(e,wn):n)!==u&&(qn=t,e=We(e)),(t=e)===u){if(t=wn,e=wn,n=wn,Ee.test(r.charAt(wn))?(s=r.charAt(wn),wn++):(s=u,0===Fn&&Vn(Re)),s===u&&(s=null),s!==u){if(a=[],Be.test(r.charAt(wn))?(o=r.charAt(wn),wn++):(o=u,0===Fn&&Vn($e)),o!==u)for(;o!==u;)a.push(o),Be.test(r.charAt(wn))?(o=r.charAt(wn),wn++):(o=u,0===Fn&&Vn($e));else a=u;a!==u?n=s=[s,a]:(wn=n,n=u)}else wn=n,n=u;(e=n!==u?r.substring(e,wn):n)!==u&&(qn=t,e=Xe(e)),t=e}}}}return Fn--,t===u&&(e=u,0===Fn&&Vn(Qe)),Ln[d]={nextPos:wn,result:t},t}())===u&&(t=lu()),Ln[e]={nextPos:wn,result:t},t)}())===u&&(t=function(){var t,e,n,s,a=38*wn+26,o=Ln[a];return o?(wn=o.nextPos,o.result):(t=wn,40===r.charCodeAt(wn)?(e=er,wn++):(e=u,0===Fn&&Vn(nr)),e!==u&&fu()!==u&&(n=Hn())!==u&&fu()!==u?(41===r.charCodeAt(wn)?(s=ur,wn++):(s=u,0===Fn&&Vn(sr)),s!==u?(qn=t,e=vr(n),t=e):(wn=t,t=u)):(wn=t,t=u),Ln[a]={nextPos:wn,result:t},t)}())===u&&(t=Zn()),Ln[e]={nextPos:wn,result:t},t)}function au(){var t,e,n,s,a,o,i,c=38*wn+27,l=Ln[c];if(l)return wn=l.nextPos,l.result;if(Fn++,t=wn,e=wn,n=wn,s=wn,Fn++,a=lu(),Fn--,a===u?s=void 0:(wn=s,s=u),s!==u)if(Cr.test(r.charAt(wn))?(a=r.charAt(wn),wn++):(a=u,0===Fn&&Vn(yr)),a!==u){for(o=[],mr.test(r.charAt(wn))?(i=r.charAt(wn),wn++):(i=u,0===Fn&&Vn(_r));i!==u;)o.push(i),mr.test(r.charAt(wn))?(i=r.charAt(wn),wn++):(i=u,0===Fn&&Vn(_r));o!==u?n=s=[s,a,o]:(wn=n,n=u)}else wn=n,n=u;else wn=n,n=u;return(e=n!==u?r.substring(e,wn):n)!==u&&(qn=t,e=Sr(e)),Fn--,(t=e)===u&&(e=u,0===Fn&&Vn(Pr)),Ln[c]={nextPos:wn,result:t},t}function ou(){var t,e,n,s,a=38*wn+28,o=Ln[a];if(o)return wn=o.nextPos,o.result;if(Fn++,t=wn,34===r.charCodeAt(wn)?(e=wr,wn++):(e=u,0===Fn&&Vn(qr)),e!==u){for(n=[],(s=iu())===u&&(Qr.test(r.charAt(wn))?(s=r.charAt(wn),wn++):(s=u,0===Fn&&Vn(Er)));s!==u;)n.push(s),(s=iu())===u&&(Qr.test(r.charAt(wn))?(s=r.charAt(wn),wn++):(s=u,0===Fn&&Vn(Er)));n!==u?(34===r.charCodeAt(wn)?(s=wr,wn++):(s=u,0===Fn&&Vn(qr)),s!==u?(qn=t,t=e=Rr(n)):(wn=t,t=u)):(wn=t,t=u)}else wn=t,t=u;if(t===u)if(t=wn,39===r.charCodeAt(wn)?(e=Fr,wn++):(e=u,0===Fn&&Vn(Lr)),e!==u){for(n=[],(s=cu())===u&&(kr.test(r.charAt(wn))?(s=r.charAt(wn),wn++):(s=u,0===Fn&&Vn(Nr)));s!==u;)n.push(s),(s=cu())===u&&(kr.test(r.charAt(wn))?(s=r.charAt(wn),wn++):(s=u,0===Fn&&Vn(Nr)));n!==u?(39===r.charCodeAt(wn)?(s=Fr,wn++):(s=u,0===Fn&&Vn(Lr)),s!==u?(qn=t,t=e=Rr(n)):(wn=t,t=u)):(wn=t,t=u)}else wn=t,t=u;return Fn--,t===u&&(e=u,0===Fn&&Vn(Tr)),Ln[a]={nextPos:wn,result:t},t}function iu(){var t,e,n,s,a,o,i,c,l=38*wn+29,f=Ln[l];return f?(wn=f.nextPos,f.result):(Fn++,t=wn,r.substr(wn,2)===Mr?(e=Mr,wn+=2):(e=u,0===Fn&&Vn(Ir)),e!==u&&(qn=t,e=Ur()),(t=e)===u&&(t=wn,r.substr(wn,2)===Vr?(e=Vr,wn+=2):(e=u,0===Fn&&Vn(zr)),e!==u&&(qn=t,e=Dr()),(t=e)===u&&(t=wn,r.substr(wn,2)===Zr?(e=Zr,wn+=2):(e=u,0===Fn&&Vn(Or)),e!==u&&(qn=t,e=Br()),(t=e)===u&&(t=wn,r.substr(wn,2)===$r?(e=$r,wn+=2):(e=u,0===Fn&&Vn(Gr)),e!==u&&(qn=t,e=Hr()),(t=e)===u&&(t=wn,r.substr(wn,2)===Jr?(e=Jr,wn+=2):(e=u,0===Fn&&Vn(Kr)),e!==u&&(qn=t,e=Wr()),(t=e)===u&&(t=wn,r.substr(wn,2)===Xr?(e=Xr,wn+=2):(e=u,0===Fn&&Vn(Yr)),e!==u&&(qn=t,e=te()),(t=e)===u&&(t=wn,r.substr(wn,2)===re?(e=re,wn+=2):(e=u,0===Fn&&Vn(ee)),e!==u&&(qn=t,e=ne()),(t=e)===u&&(t=wn,r.substr(wn,2)===ue?(e=ue,wn+=2):(e=u,0===Fn&&Vn(se)),e!==u&&(qn=t,e=ae()),(t=e)===u&&(t=wn,r.substr(wn,2)===oe?(e=oe,wn+=2):(e=u,0===Fn&&Vn(ie)),e!==u&&(qn=t,e=ce()),(t=e)===u&&(t=wn,r.substr(wn,2)===le?(e=le,wn+=2):(e=u,0===Fn&&Vn(fe)),e!==u?(n=wn,s=wn,he.test(r.charAt(wn))?(a=r.charAt(wn),wn++):(a=u,0===Fn&&Vn(Ae)),a!==u?(he.test(r.charAt(wn))?(o=r.charAt(wn),wn++):(o=u,0===Fn&&Vn(Ae)),o!==u?s=a=[a,o]:(wn=s,s=u)):(wn=s,s=u),(n=s!==u?r.substring(n,wn):s)!==u?(qn=t,t=e=de(n)):(wn=t,t=u)):(wn=t,t=u),t===u&&(t=wn,r.substr(wn,2)===pe?(e=pe,wn+=2):(e=u,0===Fn&&Vn(xe)),e!==u?(n=wn,s=wn,he.test(r.charAt(wn))?(a=r.charAt(wn),wn++):(a=u,0===Fn&&Vn(Ae)),a!==u?(he.test(r.charAt(wn))?(o=r.charAt(wn),wn++):(o=u,0===Fn&&Vn(Ae)),o!==u?(he.test(r.charAt(wn))?(i=r.charAt(wn),wn++):(i=u,0===Fn&&Vn(Ae)),i!==u?(he.test(r.charAt(wn))?(c=r.charAt(wn),wn++):(c=u,0===Fn&&Vn(Ae)),c!==u?s=a=[a,o,i,c]:(wn=s,s=u)):(wn=s,s=u)):(wn=s,s=u)):(wn=s,s=u),(n=s!==u?r.substring(n,wn):s)!==u?(qn=t,t=e=de(n)):(wn=t,t=u)):(wn=t,t=u))))))))))),Fn--,t===u&&(e=u,0===Fn&&Vn(jr)),Ln[l]={nextPos:wn,result:t},t)}function cu(){var t,e,n=38*wn+30,s=Ln[n];return s?(wn=s.nextPos,s.result):(Fn++,t=wn,r.substr(wn,2)===ge?(e=ge,wn+=2):(e=u,0===Fn&&Vn(ve)),e!==u&&(qn=t,e=Pe()),Fn--,(t=e)===u&&(e=u,0===Fn&&Vn(be)),Ln[n]={nextPos:wn,result:t},t)}function lu(){var t,e,n=38*wn+33,s=Ln[n];return s?(wn=s.nextPos,s.result):(Fn++,t=wn,r.substr(wn,4)===tn?(e=tn,wn+=4):(e=u,0===Fn&&Vn(rn)),e!==u&&(qn=t,e=en()),(t=e)===u&&(t=wn,r.substr(wn,5)===nn?(e=nn,wn+=5):(e=u,0===Fn&&Vn(un)),e!==u&&(qn=t,e=sn()),(t=e)===u&&(t=wn,r.substr(wn,4)===an?(e=an,wn+=4):(e=u,0===Fn&&Vn(on)),e!==u&&(qn=t,e=cn()),(t=e)===u&&(t=wn,r.substr(wn,3)===ln?(e=ln,wn+=3):(e=u,0===Fn&&Vn(fn)),e!==u&&(qn=t,e=hn()),(t=e)===u&&(t=wn,r.substr(wn,9)===An?(e=An,wn+=9):(e=u,0===Fn&&Vn(dn)),e!==u&&(qn=t,e=pn()),t=e)))),Fn--,t===u&&(e=u,0===Fn&&Vn(Ye)),Ln[n]={nextPos:wn,result:t},t)}function fu(){var t,r,e=38*wn+34,n=Ln[e];if(n)return wn=n.nextPos,n.result;for(Fn++,t=[],(r=hu())===u&&(r=Au());r!==u;)t.push(r),(r=hu())===u&&(r=Au());return Fn--,t===u&&(r=u,0===Fn&&Vn(xn)),Ln[e]={nextPos:wn,result:t},t}function hu(){var t,e,n,s,a,o,i=38*wn+35,c=Ln[i];if(c)return wn=c.nextPos,c.result;if(Fn++,t=wn,r.substr(wn,2)===gn?(e=gn,wn+=2):(e=u,0===Fn&&Vn(vn)),e!==u){for(n=[],s=wn,a=wn,Fn++,r.substr(wn,2)===Pn?(o=Pn,wn+=2):(o=u,0===Fn&&Vn(Cn)),Fn--,o===u?a=void 0:(wn=a,a=u),a!==u?(r.length>wn?(o=r.charAt(wn),wn++):(o=u,0===Fn&&Vn(yn)),o!==u?s=a=[a,o]:(wn=s,s=u)):(wn=s,s=u);s!==u;)n.push(s),s=wn,a=wn,Fn++,r.substr(wn,2)===Pn?(o=Pn,wn+=2):(o=u,0===Fn&&Vn(Cn)),Fn--,o===u?a=void 0:(wn=a,a=u),a!==u?(r.length>wn?(o=r.charAt(wn),wn++):(o=u,0===Fn&&Vn(yn)),o!==u?s=a=[a,o]:(wn=s,s=u)):(wn=s,s=u);n!==u?(r.substr(wn,2)===Pn?(s=Pn,wn+=2):(s=u,0===Fn&&Vn(Cn)),s!==u?t=e=[e,n,s]:(wn=t,t=u)):(wn=t,t=u)}else wn=t,t=u;return Fn--,t===u&&(e=u,0===Fn&&Vn(bn)),Ln[i]={nextPos:wn,result:t},t}function Au(){var t,e,n=38*wn+36,s=Ln[n];if(s)return wn=s.nextPos,s.result;if(Fn++,t=[],_n.test(r.charAt(wn))?(e=r.charAt(wn),wn++):(e=u,0===Fn&&Vn(Sn)),e!==u)for(;e!==u;)t.push(e),_n.test(r.charAt(wn))?(e=r.charAt(wn),wn++):(e=u,0===Fn&&Vn(Sn));else t=u;return Fn--,t===u&&(e=u,0===Fn&&Vn(mn)),Ln[n]={nextPos:wn,result:t},t}var du=e.util.makeUnroll(kn,e),pu=e.util.makeAST(kn,e);if((n=a())!==u&&wn===r.length)return n;throw n!==u&&wn<r.length&&Vn({type:"end"}),zn(Rn,En<r.length?r.charAt(En):null,En<r.length?Un(En,En+1):Un(En,En))}}}(),ASTQQuery=function(){function t(r){_classCallCheck(this,t),this.asty=new _asty.default,this.ast=null,this.lastTrace=null,r&&this.compile(r)}return _createClass(t,[{key:"compile",value:function(t,r){var e=this;r&&console.log("ASTQ: compile: +-------------------------------------------------------------------------------------------------------\nASTQ: compile: | "+t);var n=_pegjsUtil.default.parse(ASTQQueryParse,t,{startRule:"query",makeAST:function(t,r,n,u){return e.asty.create.apply(e.asty,u).pos(t,r,n)}});if(null!==n.error)throw new Error("ASTQ: compile: query parsing failed:\n"+_pegjsUtil.default.errorMessage(n.error,!0).replace(/^/gm,"ERROR: "));return this.ast=n.ast,r&&console.log("ASTQ: compile: +-------------------------------------------------------------------------------------------------------\n"+this.dump().replace(/\n$/,"").replace(/^/gm,"ASTQ: compile: | ")),this}},{key:"dump",value:function(){return this.ast.dump()}},{key:"execute",value:function(t,r,e,n,u){u&&console.log("ASTQ: execute: +--------------------------------------------------------------+----------------------------------------");var s=new _astqQueryExec.default(r,e,n,u),a=s.execQuery(this.ast,t);return this.lastTrace=s.lastTrace||this.lastTrace,a}}]),t}();exports.default=ASTQQuery;
},{"./astq-query-exec.js":14,"asty":1,"pegjs-util":3}],17:[function(_dereq_,module,exports){
"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var ASTQUtil=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"pad",value:function(e,t){var r=t<0?-t:t;if(e.length>r)e=e.substr(0,r);else{var n=Array(r+1-e.length).join(" ");e=t<0?e+n:n+e}return e}},{key:"truthy",value:function(e){var t;switch(_typeof(e)){case"boolean":t=e;break;case"number":t=0!==e&&!isNaN(e);break;case"string":t=""!==e;break;case"object":t=!1,null!==e&&(t=!0,e instanceof Array&&(t=e.length>0));break;default:t=!1}return t}},{key:"coerce",value:function(e,t){if(_typeof(e)!==t)try{switch(t){case"boolean":"boolean"!=typeof e&&(e=Boolean(e));break;case"number":"number"!=typeof e&&(e=Number(e));break;case"string":"string"!=typeof e&&(e=String(e));break;case"regexp":"object"===_typeof(e)&&e instanceof RegExp||(e=new RegExp(e))}}catch(e){throw new Error("cannot coerce value into type "+t)}return e}}]),e}();exports.default=ASTQUtil;
},{}],18:[function(_dereq_,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var version={major:2,minor:6,micro:2,date:20190519},_default=version;exports.default=_default;
},{}],19:[function(_dereq_,module,exports){
"use strict";var _cacheLru=_interopRequireDefault(_dereq_("cache-lru")),_astqAdapter=_interopRequireDefault(_dereq_("./astq-adapter.js")),_astqAdapterXmldom=_interopRequireDefault(_dereq_("./astq-adapter-xmldom.js")),_astqAdapterParse=_interopRequireDefault(_dereq_("./astq-adapter-parse5.js")),_astqAdapterMozast=_interopRequireDefault(_dereq_("./astq-adapter-mozast.js")),_astqAdapterGraphql=_interopRequireDefault(_dereq_("./astq-adapter-graphql.js")),_astqAdapterJson=_interopRequireDefault(_dereq_("./astq-adapter-json.js")),_astqAdapterCheerio=_interopRequireDefault(_dereq_("./astq-adapter-cheerio.js")),_astqAdapterAsty=_interopRequireDefault(_dereq_("./astq-adapter-asty.js")),_astqFuncs=_interopRequireDefault(_dereq_("./astq-funcs.js")),_astqFuncsStd=_interopRequireDefault(_dereq_("./astq-funcs-std.js")),_astqQuery=_interopRequireDefault(_dereq_("./astq-query.js")),_astqVersion=_interopRequireDefault(_dereq_("./astq-version.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}var ASTQ=function(){function e(){for(var t in _classCallCheck(this,e),this._adapter=(new _astqAdapter.default).register(_astqAdapterXmldom.default,!1).register(_astqAdapterParse.default,!1).register(_astqAdapterMozast.default,!1).register(_astqAdapterGraphql.default,!1).register(_astqAdapterJson.default,!1).register(_astqAdapterCheerio.default,!1).register(_astqAdapterAsty.default,!1),this._funcs=new _astqFuncs.default,_astqFuncsStd.default)this.func(t,_astqFuncsStd.default[t]);this._cache=new _cacheLru.default}return _createClass(e,[{key:"version",value:function(){return _astqVersion.default}},{key:"adapter",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(arguments.length<1||arguments.length>2)throw new Error("ASTQ#adapter: invalid number of arguments");if(this._adapter.unregister(),"object"===_typeof(e)&&e instanceof Array||(e=[e]),e.length>1&&r)throw new Error("ASTQ#adapter: you can force just a single adapter to not taste the AST node");return e.forEach(function(e){if("string"==typeof e)if("mozast"===e)e=_astqAdapterMozast.default;else if("graphql"===e)e=_astqAdapterGraphql.default;else if("xmldom"===e)e=_astqAdapterXmldom.default;else if("parse5"===e)e=_astqAdapterParse.default;else if("json"===e)e=_astqAdapterJson.default;else if("cheerio"===e)e=_astqAdapterCheerio.default;else{if("asty"!==e)throw new Error("ASTQ#adapter: unknown built-in adapter");e=_astqAdapterAsty.default}t._adapter.register(e,r)}),this}},{key:"func",value:function(e,t){if(2!==arguments.length)throw new Error("ASTQ#func: invalid number of arguments");return this._funcs.register(e,t),this}},{key:"cache",value:function(e){if(1!==arguments.length)throw new Error("ASTQ#cache: invalid number of arguments");return this._cache.limit(e),this}},{key:"compile",value:function(e,t){if(arguments.length<1)throw new Error("ASTQ#compile: too less arguments");if(arguments.length>2)throw new Error("ASTQ#compile: too many arguments");void 0===t&&(t=!1);var r=this._cache.get(e);return void 0===r&&((r=new _astqQuery.default).compile(e,t),this._cache.set(e,r)),r}},{key:"execute",value:function(e,t,r,a){if(arguments.length<2)throw new Error("ASTQ#execute: too less arguments");if(arguments.length>4)throw new Error("ASTQ#execute: too many arguments");void 0===r&&(r={}),void 0===a&&(a=!1);var s=this._adapter.select(e);if(void 0===s)throw new Error("ASTQ#execute: no suitable adapter found for node");return t.execute(e,s,r,this._funcs,a)}},{key:"query",value:function(e,t,r,a){if(arguments.length<2)throw new Error("ASTQ#query: too less arguments");if(arguments.length>4)throw new Error("ASTQ#query: too many arguments");return void 0===r&&(r={}),void 0===a&&(a=!1),this.execute(e,this.compile(t,a),r,a)}}]),e}();module.exports=ASTQ;
},{"./astq-adapter-asty.js":4,"./astq-adapter-cheerio.js":5,"./astq-adapter-graphql.js":6,"./astq-adapter-json.js":7,"./astq-adapter-mozast.js":8,"./astq-adapter-parse5.js":9,"./astq-adapter-xmldom.js":10,"./astq-adapter.js":11,"./astq-funcs-std.js":12,"./astq-funcs.js":13,"./astq-query.js":16,"./astq-version.js":18,"cache-lru":2}]},{},[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19])(19)
});
